function addEventListeners(){let e=document.querySelectorAll("span.add_friend");[].forEach.call(e,function(e){e.addEventListener("click",requestFriendRequest)});let t=document.querySelectorAll("span.cancel_friend");[].forEach.call(t,function(e){e.addEventListener("click",calcelFriendRequest)});let r=document.querySelectorAll("span.accept_friend");[].forEach.call(r,function(e){e.addEventListener("click",acceptFriendRequest)});let n=document.querySelectorAll("span.decline_friend");[].forEach.call(n,function(e){e.addEventListener("click",declineFriendRequest)});let i=document.querySelectorAll("span.remove_friend");[].forEach.call(i,function(e){e.addEventListener("click",removeFriendRequest)});let d=document.querySelector("#profile_card button.report");d&&d.addEventListener("click",openReportUserModal)}function openReportUserModal(e){let t=this.getAttribute("data-id");$("#reportModal").modal("show");let r=document.querySelector("#reportModal");r.querySelector("#reportModalLabel").innerHTML="Report user",r.querySelector("#report_id").value=t,r.querySelector(".sendReport").addEventListener("click",sendReportUserRequest)}function sendReportUserRequest(e){let t=this.closest("#reportModal"),r=t.querySelector("#report_id").value;t.querySelector("#report_id").value="";let n=t.querySelector("#report_title").value;t.querySelector("#report_title").value="";let i=t.querySelector("#report_description").value;t.querySelector("#report_description").value="",$("#reportModal").modal("hide"),sendAjaxRequest("put","/api/users/"+r+"/report",{title:n,description:i},userReportedHandler)}function userReportedHandler(){201===this.status||200===this.status?addFeedback("User reported sucessfully"):window.location="/"}function requestFriendRequest(e){let t=this.closest("span").getAttribute("data-id");return sendAjaxRequest("put","/api/sendFriendRequest/"+t,null,requestFriendHandler),e.preventDefault(),!1}function calcelFriendRequest(e){let t=this.closest("span").getAttribute("data-id");return sendAjaxRequest("put","/api/cancelFriendRequest/"+t,null,cancelFriendHandler),e.preventDefault(),!1}function acceptFriendRequest(e){let t=this.closest("span").getAttribute("data-id");return sendAjaxRequest("put","/api/acceptFriendRequest/"+t,null,acceptFriendHandler),e.preventDefault(),!1}function declineFriendRequest(e){let t=this.closest("span").getAttribute("data-id");return sendAjaxRequest("put","/api/declineFriendRequest/"+t,null,declineFriendHandler),e.preventDefault(),!1}function removeFriendRequest(e){let t=this.closest("span").getAttribute("data-id");return sendAjaxRequest("put","/api/removeFriendRequest/"+t,null,removeFriendHandler),e.preventDefault(),!1}function requestFriendHandler(){if(200!=this.status&&201!=this.status)return void(window.location="/");let e=JSON.parse(this.responseText);if(0==e.result)return!1;let t=document.querySelector('span.add_friend[data-id="'+e.user_id+'"]');return t.classList.remove("add_friend"),t.classList.add("cancel_friend"),t.innerHTML="Cancel Request",t.removeEventListener("click",requestFriendRequest),t.addEventListener("click",calcelFriendRequest),!0}function cancelFriendHandler(){if(200!=this.status&&201!=this.status)return void(window.location="/");let e=JSON.parse(this.responseText);if(0==e.result)return!1;let t=document.querySelector('span.cancel_friend[data-id="'+e.user_id+'"]');return t.classList.remove("cancel_friend"),t.classList.add("add_friend"),t.innerHTML="Add Friend",t.removeEventListener("click",calcelFriendRequest),t.addEventListener("click",requestFriendRequest),!0}function acceptFriendHandler(){if(200!=this.status&&201!=this.status)return void(window.location="/");let e=JSON.parse(this.responseText);if(0==e.result)return!1;let t=document.querySelector('span.accept_friend[data-id="'+e.user_id+'"]');return document.querySelector('span.decline_friend[data-id="'+e.user_id+'"]').remove(),t.outerHTML=`<span type="span" class="btn btn-light remove_friend interaction_opt" data-id='${e.user_id}' style="margin-left: auto; margin-right:4%;background-color: rgba(0,0,150,.03); ">\n        Remove Friend\n    </span>`,document.querySelector('span.remove_friend[data-id="'+e.user_id+'"]').addEventListener("click",removeFriendRequest),!0}function declineFriendHandler(){if(200!=this.status&&201!=this.status)return void(window.location="/");let e=JSON.parse(this.responseText);if(0==e.result)return!1;let t=document.querySelector('span.decline_friend[data-id="'+e.user_id+'"]');return document.querySelector('span.accept_friend[data-id="'+e.user_id+'"]').remove(),t.outerHTML=`<span type="span" class="btn btn-light add_friend interaction_opt" data-id='${e.user_id}' style="margin-left: auto; margin-right:4%;background-color: rgba(0,0,150,.03); ">\n        Add Friend\n    </span>`,document.querySelector('span.add_friend[data-id="'+e.user_id+'"]').addEventListener("click",requestFriendRequest),!0}function removeFriendHandler(){if(200!=this.status&&201!=this.status)return void(window.location="/");let e=JSON.parse(this.responseText);return 0!=e.result&&(document.querySelector('span.remove_friend[data-id="'+e.user_id+'"]').outerHTML=`<span type="span" class="btn btn-light add_friend interaction_opt" data-id='${e.user_id}' style="margin-left: auto; margin-right:4%;background-color: rgba(0,0,150,.03); ">\n        Add Friend\n    </span>`,document.querySelector('span.add_friend[data-id="'+e.user_id+'"]').addEventListener("click",requestFriendRequest),!0)}addEventListeners();