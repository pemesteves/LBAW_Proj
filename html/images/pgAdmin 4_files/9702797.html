<!DOCTYPE html>
<!--[if lt IE 7]>
<html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>
<html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>
<html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js"><!--<![endif]--><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <title>lbaw2034/lbaw2034@LBAW34</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- To set pgAdmin4 shortcut icon in browser -->
    <link rel="shortcut icon" href="http://localhost:5050/favicon.ico?ver=41900">

    <!-- Base template stylesheets -->
    <link type="text/css" rel="stylesheet" href="style.css">
    <link type="text/css" rel="stylesheet" href="pgadmin_002.css">
    <link type="text/css" rel="stylesheet" href="pgadmin.css">

     <!--View specified stylesheets-->
    
    <script>
        /* This is used to change publicPath of webpack at runtime */
        window.getChunkURL = function() {
            return "/static/js/generated/";
        };
    </script>
    <!-- Base template scripts -->
    <script type="text/javascript" src="require.js"></script>
    <script type="text/javascript">
            require.config({
                baseUrl: '',
                urlArgs: 'ver=41900',
                waitSeconds: 0,
                shim: {},
                paths: {
                    sources: "/static/js",
                    datagrid: "/static/js/generated/datagrid",
                    sqleditor: "/static/js/generated/sqleditor",
                    'pgadmin.browser.utils': "/browser/" + "js/utils",
                    'pgadmin.browser.endpoints': "/browser/" + "js/endpoints",
                    'pgadmin.browser.messages': "/browser/" + "js/messages",
                    'pgadmin.server.supported_servers': "/browser/" + "server/supported_servers",
                    'pgadmin.user_management.current_user': "/user_management/" + "current_user",
                    'translations': "/tools/" + "translations"
                }
            });

    </script>

    <!-- View specified scripts -->
    <script type="text/javascript" src="vendor_002.js"></script>
    <script type="text/javascript" src="vendor.js"></script>
    <script type="text/javascript" src="pgadmin_commons.js"></script>

<script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="sources/generated/browser_nodes" src="browser_nodes.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="sources/generated/codemirror" src="codemirror.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="sources/generated/slickgrid" src="4161003_data/slickgrid.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="sources/generated/sqleditor" src="4161003_data/sqleditor.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="translations" src="translations.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="pgadmin.browser.endpoints" src="endpoints.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="pgadmin.browser.utils" src="utils.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="pgadmin.user_management.current_user" src="current_user.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="pgadmin.browser.messages" src="messages.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="pgadmin.server.supported_servers" src="supported_servers.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="sources/gettext" src="gettext.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="sources/pgadmin" src="pgadmin.js"></script><link id="wcTheme" rel="stylesheet" type="text/css" href="9702797_data/webcabin.css"><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="sources/generated/file_utils" src="4161003_data/file_utils.js"></script><style>body.tablesorter-disableSelection { -ms-user-select: none; -moz-user-select: -moz-none;-khtml-user-select: none; -webkit-user-select: none; user-select: none; }.tablesorter-resizable-container { position: relative; height: 1px; }.tablesorter-resizable-handle { position: absolute; display: inline-block; width: 8px;top: 1px; cursor: ew-resize; z-index: 3; user-select: none; -moz-user-select: none; }</style></head>
<body tabindex="0" class="wcDesktop">
<!--[if lt IE 7]>
<p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade
    your browser</a> to improve your experience.</p>
<![endif]-->

<style>
    body {padding: 0px;}
    </style>
<div id="main-editor_panel">
    <div class="sql-editor">
        <div id="btn-toolbar" class="editor-toolbar" role="toolbar" aria-label="">
            <div class="btn-group mr-1" role="group" aria-label="">
                <button id="btn-load-file" type="button" class="btn btn-sm btn-secondary btn-load-file" title="Open File (accesskey + O)" accesskey="O" tabindex="0" aria-label="Open File (accesskey + O)">
                    <i class="fa fa-folder-open-o sql-icon-lg" aria-hidden="true" role="img"></i>
                </button>
                <button id="btn-save-file" type="button" class="btn btn-sm btn-secondary" title="Save File (accesskey + S)" accesskey="S" aria-label="Save File (accesskey + S)">
                    <i class="fa fa-floppy-o sql-icon-lg" aria-hidden="true" tabindex="0" role="img"></i>
                </button>
                <button id="btn-file-menu-dropdown" type="button" class="btn btn-sm btn-secondary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" tabindex="0">
                </button>
                <ul class="dropdown-menu">
                    <li>
                        <a class="dropdown-item" id="btn-file-menu-save" href="#" tabindex="0" style="display: block;">
                            <span>Save</span>
                        </a>
                    </li>
                    <li>
                        <a class="dropdown-item" id="btn-file-menu-save-as" href="#" tabindex="0">
                            <span>Save As</span>
                        </a>
                    </li>
                </ul>
            </div>
            <div class="btn-group mr-1" role="group" aria-label="">
                <button id="btn-save-data" type="button" class="btn btn-sm btn-secondary" title="Save Data Changes (F6)" accesskey="" tabindex="0" disabled="disabled" aria-label="Save Data Changes (F6)">
                    <i class="pg-font-icon icon-save-data-changes sql-icon-lg" aria-hidden="true" role="img"></i>
                </button>
            </div>
            <div class="btn-group mr-1" role="group" aria-label="">
                <button id="btn-find" type="button" class="btn btn-sm btn-secondary" aria-label="Find" title="Find (Ctrl/Cmd+F)">
                    <i class="fa fa-search sql-icon-lg" aria-hidden="true" tabindex="0" role="img"></i>
                </button>
                <button id="btn-find-menu-dropdown" type="button" class="btn btn-sm btn-secondary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" title="Find (accesskey + N)" accesskey="N" tabindex="0" aria-label="Find (accesskey + N)">
                </button>
                <ul class="dropdown-menu">
                    <li>
                        <a class="dropdown-item" id="btn-find-menu-find" href="#" tabindex="0">
                            <span> Find                                  (Ctrl+F)</span>
                        </a>
                    </li>
                    <li>
                        <a class="dropdown-item" id="btn-find-menu-find-next" href="#" tabindex="0">
                            <span> Find Next                                  (Ctrl+G)</span>
                        </a>
                    </li>
                    <li>
                        <a class="dropdown-item" id="btn-find-menu-find-previous" href="#" tabindex="0">
                            <span> Find Previous                                  (Ctrl+Shift+G)</span>
                        </a>
                    </li>
                    <li>
                        <a class="dropdown-item" id="btn-find-menu-find-persistent" href="#" tabindex="0">
                            <span>Persistent Find</span>
                        </a>
                    </li>
                    <li class="dropdown-divider"></li>
                    <li>
                        <a class="dropdown-item" id="btn-find-menu-replace" href="#" tabindex="0">
                            <span> Replace                                  (Ctrl+Shift+F)</span>
                        </a>
                    </li>
                    <li>
                        <a class="dropdown-item" id="btn-find-menu-replace-all" href="#" tabindex="0">
                            <span>Replace All</span>
                        </a>
                    </li>
                    <li class="dropdown-divider"></li>
                    <li>
                        <a class="dropdown-item" id="btn-find-menu-jump" href="#" tabindex="0">
                            <span>Jump (Alt+G)</span>
                        </a>
                    </li>
                </ul>
            </div>
            <div class="btn-group mr-1" role="group" aria-label="">
                <button id="btn-copy-row" type="button" class="btn btn-sm btn-secondary" title="Copy (accesskey + C)" accesskey="C" tabindex="0" disabled="disabled" aria-label="Copy (accesskey + C)">
                    <i class="fa fa-files-o sql-icon-lg" aria-hidden="true" role="img"></i>
                </button>
                <button id="btn-copy-row-dropdown" type="button" class="btn btn-sm btn-secondary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" tabindex="0">
                </button>
                <ul class="dropdown-menu">
                    <li>
                        <a class="dropdown-item" id="btn-copy-with-header" href="#" tabindex="0">
                            <i class="copy-with-header fa fa-check visibility-hidden" aria-hidden="true" role="img"></i>
                            <span> Copy with headers </span>
                        </a>
                    </li>
                </ul>
                <button id="btn-paste-row" type="button" class="btn btn-sm btn-secondary" title="Paste (accesskey + P)" accesskey="P" tabindex="0" disabled="disabled" aria-label="Paste (accesskey + P)">
                    <i class="fa fa-clipboard sql-icon-lg" aria-hidden="true" role="img"></i>
                </button>
            </div>
            <div class="btn-group mr-1" role="group" aria-label="">
                <button id="btn-delete-row" type="button" class="btn btn-sm btn-secondary" title="Delete (accesskey + D)" accesskey="D" tabindex="0" disabled="disabled" aria-label="Delete (accesskey + D)">
                    <i class="fa fa-trash sql-icon-lg" aria-hidden="true" role="img"></i>
                </button>
            </div>
            <div class="btn-group mr-1" role="group" aria-label="">
                <button id="btn-edit-dropdown" type="button" class="btn btn-sm btn-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" aria-label="Edit" title="Edit" tabindex="0">
                    <i class="fa fa-pencil-square-o sql-icon-lg" aria-hidden="true" role="img"></i>
                </button>
                <ul class="dropdown-menu">
                    <li>
                        <a class="dropdown-item" id="btn-indent-code" href="#" tabindex="0">
                            <span> Indent Selection (Tab) </span>
                        </a>
                    </li>
                    <li>
                        <a class="dropdown-item" id="btn-unindent-code" href="#" tabindex="0">
                            <span> Unindent Selection (Shift+Tab) </span>
                        </a>
                    </li>
                    <li>
                        <a class="dropdown-item" id="btn-comment-line" href="#" tabindex="0">
                            <span> Inline Comment Selection                                  (Ctrl+/)</span>
                        </a>
                    </li>
                    <li>
                        <a class="dropdown-item" id="btn-uncomment-line" href="#" tabindex="0">
                            <span> Inline Uncomment Selection                                  (Ctrl+.)</span>
                        </a>
                    </li>
                    <li>
                        <a class="dropdown-item" id="btn-toggle-comment-block" href="#" tabindex="0">
                            <span> Block Comment/Uncomment Selection                                  (Shift+Ctrl+/)</span>
                        </a>
                    </li>
                </ul>
            </div>
            <div class="btn-group mr-1" role="group" aria-label="">
                <button id="btn-filter" type="button" class="btn btn-secondary" title="Filter (accesskey + F)" accesskey="F" tabindex="0" disabled="disabled" aria-label="Filter (accesskey + F)">
                    <i class="fa fa-filter sql-icon-lg" aria-hidden="true" role="img"></i>
                </button>
                <button id="btn-filter-dropdown" type="button" class="btn btn-sm btn-secondary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" title="Filter options (accesskey + I)" accesskey="I" disabled="disabled" tabindex="0" aria-label="Filter options (accesskey + I)">
                </button>
                <ul class="dropdown-menu dropdown-menu-right">
                    <li>
                        <a id="btn-filter-menu" class="dropdown-item" href="#" tabindex="0">Sort/Filter</a>
                    </li>
                    <li>
                        <a id="btn-include-filter" class="dropdown-item" href="#" tabindex="0">Filter by Selection</a>
                    </li>
                    <li>
                        <a id="btn-exclude-filter" class="dropdown-item" href="#" tabindex="0">Exclude by Selection</a>
                    </li>
                    <li>
                        <a id="btn-remove-filter" class="dropdown-item" href="#" tabindex="0">Remove Sort/Filter</a>
                    </li>
                </ul>
            </div>
            <div class="btn-group mr-1" role="group" aria-label="">
                <select id="btn-rows-limit" class="limit form-control form-control-sm" disabled="disabled" title="Rows limit (accesskey + R)" accesskey="R" tabindex="0" aria-label="Rows limit (accesskey + R)">
                    <option value="-1" selected="selected">No limit</option>
                    <option value="1000">1000 rows</option>
                    <option value="500">500 rows</option>
                    <option value="100">100 rows</option>
                </select>
            </div>

            <div class="btn-group mr-1" role="group" aria-label="">
                <button id="btn-cancel-query" type="button" class="btn btn-sm btn-secondary" title="Cancel query (accesskey + Q)" accesskey="Q" tabindex="0" aria-label="Cancel query (accesskey + Q)" disabled="disabled">
                    <i class="fa fa-stop sql-icon-lg" aria-hidden="true" role="img"></i>
                </button>
                <button id="btn-flash" data-test-selector="execute-refresh-button" type="button" class="btn btn-sm btn-secondary" style="width: 32px;" title="Execute/Refresh (F5)" tabindex="0" data-click-counter="2" aria-label="Execute/Refresh (F5)">
                    <i class="fa fa-play sql-icon-lg" aria-hidden="true" role="img"></i>
                </button>
                <button id="btn-query-dropdown" type="button" class="btn btn-sm btn-secondary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" accesskey="X" title="Execute options (accesskey + X)" tabindex="0" aria-label="Execute options (accesskey + X)">
                </button>
                <ul class="dropdown-menu" role="menu">
                    <li>
                        <a class="dropdown-item" id="btn-auto-commit" href="#" tabindex="0">
                            <i class="auto-commit fa fa-check" aria-hidden="true" role="img"></i>
                            <span> Auto commit? </span>
                        </a>
                    </li>
                    <li>
                        <a class="dropdown-item" id="btn-auto-rollback" href="#" tabindex="0">
                            <i class="auto-rollback fa fa-check visibility-hidden" aria-hidden="true" role="img"></i>
                            <span> Auto rollback? </span>
                        </a>
                    </li>
                </ul>
            </div>
            <div class="btn-group mr-1" role="group" aria-label="">
                <button id="btn-explain" type="button" class="btn btn-sm btn-secondary" title="Explain (F7)" accesskey="" tabindex="0" aria-label="Explain (F7)">
                    <i class="fa fa-hand-pointer-o sql-icon-lg" aria-hidden="true" role="img"></i>
                </button>
                <button id="btn-explain-analyze" type="button" class="btn btn-sm btn-secondary" title="Explain Analyze (Shift+F7)" accesskey="" aria-label="Explain Analyze (Shift+F7)">
                    <i class="fa fa-list-alt sql-icon-lg" aria-hidden="true" role="img"></i>
                </button>
                <button id="btn-explain-options-dropdown" type="button" class="btn btn-sm btn-secondary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" tabindex="0">
                </button>
                <ul class="dropdown-menu">
                    <li>
                        <a class="dropdown-item" id="btn-explain-verbose" href="#" tabindex="0">
                            <i class="explain-verbose fa fa-check visibility-hidden" aria-hidden="true" role="img"></i>
                            <span> Verbose </span>
                        </a>
                    </li>
                    <li>
                        <a class="dropdown-item" id="btn-explain-costs" href="#" tabindex="0">
                            <i class="explain-costs fa fa-check visibility-hidden" aria-hidden="true" role="img"></i>
                            <span> Costs </span>
                        </a>
                    </li>
                    <li>
                        <a class="dropdown-item" id="btn-explain-buffers" href="#" tabindex="0">
                            <i class="explain-buffers fa fa-check visibility-hidden" aria-hidden="true" role="img"></i>
                            <span> Buffers </span>
                        </a>
                    </li>
                    <li>
                        <a class="dropdown-item" id="btn-explain-timing" href="#" tabindex="0">
                            <i class="explain-timing fa fa-check visibility-hidden" aria-hidden="true" role="img"></i>
                            <span> Timing </span>
                        </a>
                    </li>
                    <li data-min-ver="100000" class="d-none">
                        <a class="dropdown-item" id="btn-explain-summary" href="#" tabindex="0">
                            <i class="explain-summary fa fa-check visibility-hidden" aria-hidden="true" role="img"></i>
                            <span> Summary </span>
                        </a>
                    </li>
                    <li data-min-ver="120000" class="d-none">
                        <a class="dropdown-item" id="btn-explain-settings" href="#" tabindex="0">
                            <i class="explain-settings fa fa-check visibility-hidden" aria-hidden="true" role="img"></i>
                            <span> Settings </span>
                        </a>
                    </li>
                </ul>
            </div>
            <div class="btn-group mr-1" role="group" aria-label="">
                <button id="btn-commit" type="button" class="btn btn-sm btn-secondary" title="Commit (Shift+Ctrl+M)" accesskey="" tabindex="0" disabled="disabled" aria-label="Commit (Shift+Ctrl+M)">
                    <i class="pg-font-icon icon-commit sql-icon-lg" aria-hidden="true" role="img"></i>
                </button>
                <button id="btn-rollback" type="button" class="btn btn-sm btn-secondary" title="Rollback (Shift+Ctrl+R)" tabindex="0" disabled="disabled" aria-label="Rollback (Shift+Ctrl+R)">
                    <i class="pg-font-icon icon-rollback sql-icon-lg" aria-hidden="true" role="img"></i>
                </button>
            </div>
            <div class="btn-group mr-1" role="group" aria-label="">
                <button id="btn-clear-dropdown" type="button" class="btn btn-sm btn-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" title="Clear (accesskey + L)" accesskey="L" tabindex="0" aria-label="Clear (accesskey + L)">
                    <i class="fa fa-eraser sql-icon-lg" aria-hidden="true" role="img"></i>
                </button>
                <ul class="dropdown-menu">
                    <li>
                        <a class="dropdown-item" id="btn-clear" href="#" tabindex="0">
                            <span> Clear Query Window </span>
                        </a>
                    </li>
                    <li>
                        <a class="dropdown-item" id="btn-clear-history" href="#" tabindex="0">
                            <span> Clear History </span>
                        </a>
                    </li>
                </ul>
            </div>
            <div class="btn-group" role="group" aria-label="">
                <button id="btn-download" type="button" class="btn btn-sm btn-secondary" title="Download as CSV (F8)" tabindex="0" aria-label="Download as CSV (F8)">
                    <i class="fa fa-download sql-icon-lg" aria-hidden="true" role="img"></i>
                </button>
            </div>
        </div>

        <div class="connection_status_wrapper d-flex">
            <div id="btn-conn-status" role="status" class="connection_status d-flex justify-content-center align-items-center" data-container="body" data-toggle="popover" data-placement="bottom" data-content="The session is idle and there is no current transaction." data-panel-visible="visible" accesskey="T" tabindex="0" data-original-title="" title="">
                <i class="pg-font-icon icon-query-tool-connected" aria-hidden="true" title="Connection status (click for details) (accesskey + T)" role="img">
                </i>
            </div>
            <div class="editor-title" style="background-color: ; color: ;">lbaw2034/lbaw2034@LBAW34</div>
        </div>
        <div id="editor-panel" tabindex="0">
            <div id="fetching_data" class="pg-sp-container sql-editor-busy-fetching d-none">
                <div class="pg-sp-content">
                    <div class="row">
                        <div class="col-12 pg-sp-icon sql-editor-busy-icon"></div>
                    </div>
                    <div class="row"><div class="col-12 pg-sp-text sql-editor-busy-text">Loading data from the database server and rendering...</div></div>
                </div>
            </div>
        <div class="wcDocker"><div class="wcDockerTransition"></div><div class="wcLayoutPane" style="height: 430.25px; top: 0px; left: 0px; right: 0px;"><div class="wcFrame wcWide wcTall"><div class="wcFrameTitleBar wcTabTop" style="width: 1605px;"><div class="wcTabScroller" style="left: 0px;"><div class="wcPanelTab wcPanelTabActive" id="0"><div><a href="#" tabindex="-1" class="panel-link-heading">Query Editor</a></div></div><div class="wcPanelTab" id="1"><div><a href="#" tabindex="-1" class="panel-link-heading">Query History</a></div></div></div><div class="wcFrameButtonBar" style="min-width: 0px; width: 0px; right: 0px;"></div></div><div class="wcFrameButtonBar" style="min-width: 0px; width: 0px;"><div class="wcFrameButton" title="Close the currently active panel tab" aria-label="Close panel" tabindex="0" style="display: none;"><div class="fa fa-close"></div></div><div class="wcFrameButton" title="Collapse the active panel" style="display: none;"><div class="fa fa-download"></div>C</div></div><div class="wcFrameCenter wcPanelBackground wcScrollableX wcScrollableY" style="left: 0px; right: 0px; bottom: 0px;"><div class="wcPanelTabContent" id="0"><table class="wcLayout wcWide wcTall"><tbody><tr><td><div class="pg-panel-content"><div id="output-panel" tabindex="0"><textarea id="sql_query_tool" tabindex="-1" style="display: none;"></textarea><div class="CodeMirror cm-s-default CodeMirror-simplescroll CodeMirror-focused" style="font-size: 1em;"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 377px;"><textarea style="position: absolute; bottom: -1em; padding: 0px; width: 1px; height: 1em; outline: currentcolor none medium;" autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" wrap="off"></textarea></div><div class="CodeMirror-simplescroll-horizontal" cm-not-content="true" style="display: none; right: 16px; left: 0px;"><div style="width: 10px; left: 0px;"></div></div><div class="CodeMirror-simplescroll-vertical" cm-not-content="true" style="display: block; bottom: 0px;"><div style="height: 30.8896px; top: 3.34142px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true" style="height: 16px; width: 16px;"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1" draggable="true"><div class="CodeMirror-sizer" style="margin-left: 46px; margin-bottom: -12px; border-right-width: 18px; min-height: 5342px; min-width: 1252px; padding-right: 16px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div style="position: relative; outline: currentcolor none medium;" role="presentation"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like">x</pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors" style=""><div class="CodeMirror-cursor" style="left: 331px; top: 189px; height: 21px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation" style=""><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -46px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 25px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation"><span class="cm-keyword">DROP</span> <span class="cm-keyword">TABLE</span> <span class="cm-keyword">IF</span> <span class="cm-keyword">EXISTS</span> <span class="cm-keyword">public</span>."user_interested_in_event"<span class="cm-punctuation">;</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -46px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 25px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation"><span class="cm-keyword">DROP</span> <span class="cm-keyword">TABLE</span> <span class="cm-keyword">IF</span> <span class="cm-keyword">EXISTS</span> <span class="cm-keyword">public</span>."friend"<span class="cm-punctuation">;</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -46px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 25px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation"><span class="cm-keyword">DROP</span> <span class="cm-keyword">TABLE</span> <span class="cm-keyword">IF</span> <span class="cm-keyword">EXISTS</span> <span class="cm-keyword">public</span>."report"<span class="cm-punctuation">;</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -46px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 25px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation"><span class="cm-keyword">DROP</span> <span class="cm-keyword">TABLE</span> <span class="cm-keyword">IF</span> <span class="cm-keyword">EXISTS</span> <span class="cm-keyword">public</span>."notified_user"<span class="cm-punctuation">;</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -46px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 25px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation"><span class="cm-keyword">DROP</span> <span class="cm-keyword">TABLE</span> <span class="cm-keyword">IF</span> <span class="cm-keyword">EXISTS</span> <span class="cm-keyword">public</span>."notification"<span class="cm-punctuation">;</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -46px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 25px;">6</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation"><span class="cm-keyword">DROP</span> <span class="cm-keyword">TABLE</span> <span class="cm-keyword">IF</span> <span class="cm-keyword">EXISTS</span> <span class="cm-keyword">public</span>."user_in_chat"<span class="cm-punctuation">;</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -46px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 25px;">7</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation"><span class="cm-keyword">DROP</span> <span class="cm-keyword">TABLE</span> <span class="cm-keyword">IF</span> <span class="cm-keyword">EXISTS</span> <span class="cm-keyword">public</span>."user_in_group"<span class="cm-punctuation">;</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -46px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 25px;">8</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation"><span class="cm-keyword">DROP</span> <span class="cm-keyword">TABLE</span> <span class="cm-keyword">IF</span> <span class="cm-keyword">EXISTS</span> <span class="cm-keyword">public</span>."message"<span class="cm-punctuation">;</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -46px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 25px;">9</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation"><span class="cm-keyword">DROP</span> <span class="cm-keyword">TABLE</span> <span class="cm-keyword">IF</span> <span class="cm-keyword">EXISTS</span> <span class="cm-keyword">public</span>."chat"<span class="cm-punctuation">;</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -46px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 25px;">10</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation"><span class="cm-keyword">DROP</span> <span class="cm-keyword">TABLE</span> <span class="cm-keyword">IF</span> <span class="cm-keyword">EXISTS</span> <span class="cm-keyword">public</span>."comment"<span class="cm-punctuation">;</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -46px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 25px;">11</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation"><span class="cm-keyword">DROP</span> <span class="cm-keyword">TABLE</span> <span class="cm-keyword">IF</span> <span class="cm-keyword">EXISTS</span> <span class="cm-keyword">public</span>."image"<span class="cm-punctuation">;</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -46px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 25px;">12</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation"><span class="cm-keyword">DROP</span> <span class="cm-keyword">TABLE</span> <span class="cm-keyword">IF</span> <span class="cm-keyword">EXISTS</span> <span class="cm-keyword">public</span>."file"<span class="cm-punctuation">;</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -46px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 25px;">13</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation"><span class="cm-keyword">DROP</span> <span class="cm-keyword">TABLE</span> <span class="cm-keyword">IF</span> <span class="cm-keyword">EXISTS</span> <span class="cm-keyword">public</span>."post"<span class="cm-punctuation">;</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -46px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 25px;">14</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation"><span class="cm-keyword">DROP</span> <span class="cm-keyword">TABLE</span> <span class="cm-keyword">IF</span> <span class="cm-keyword">EXISTS</span> <span class="cm-keyword">public</span>."group"<span class="cm-punctuation">;</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -46px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 25px;">15</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation"><span class="cm-keyword">DROP</span> <span class="cm-keyword">TABLE</span> <span class="cm-keyword">IF</span> <span class="cm-keyword">EXISTS</span> <span class="cm-keyword">public</span>."event"<span class="cm-punctuation">;</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -46px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 25px;">16</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation"><span class="cm-keyword">DROP</span> <span class="cm-keyword">TABLE</span> <span class="cm-keyword">IF</span> <span class="cm-keyword">EXISTS</span> <span class="cm-keyword">public</span>."organization"<span class="cm-punctuation">;</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -46px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 25px;">17</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation"><span class="cm-keyword">DROP</span> <span class="cm-keyword">TABLE</span> <span class="cm-keyword">IF</span> <span class="cm-keyword">EXISTS</span> <span class="cm-keyword">public</span>."teacher"<span class="cm-punctuation">;</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -46px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 25px;">18</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation"><span class="cm-keyword">DROP</span> <span class="cm-keyword">TABLE</span> <span class="cm-keyword">IF</span> <span class="cm-keyword">EXISTS</span> <span class="cm-keyword">public</span>."student"<span class="cm-punctuation">;</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -46px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 25px;">19</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation"><span class="cm-keyword">DROP</span> <span class="cm-keyword">TABLE</span> <span class="cm-keyword">IF</span> <span class="cm-keyword">EXISTS</span> <span class="cm-keyword">public</span>."regular_user"<span class="cm-punctuation">;</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -46px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 25px;">20</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation"><span class="cm-keyword">DROP</span> <span class="cm-keyword">TABLE</span> <span class="cm-keyword">IF</span> <span class="cm-keyword">EXISTS</span> <span class="cm-keyword">public</span>."admin"<span class="cm-punctuation">;</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -46px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 25px;">21</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation"><span class="cm-keyword">DROP</span> <span class="cm-keyword">TABLE</span> <span class="cm-keyword">IF</span> <span class="cm-keyword">EXISTS</span> <span class="cm-keyword">public</span>."user"<span class="cm-punctuation">;</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -46px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 25px;">22</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -46px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 25px;">23</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation"><span class="cm-keyword">DROP</span> <span class="cm-keyword">TYPE</span> <span class="cm-keyword">IF</span> <span class="cm-keyword">EXISTS</span> "friendship_status"<span class="cm-punctuation">;</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -46px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 25px;">24</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation"><span class="cm-keyword">DROP</span> <span class="cm-keyword">TYPE</span> <span class="cm-keyword">IF</span> <span class="cm-keyword">EXISTS</span> status<span class="cm-punctuation">;</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -46px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 25px;">25</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -46px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 25px;">26</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -46px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 25px;">27</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation"><span class="cm-keyword">CREATE</span> <span class="cm-keyword">TYPE</span> status <span class="cm-keyword">AS</span> <span class="cm-keyword">ENUM</span> <span class="cm-bracket">(</span><span class="cm-string">'normal'</span><span class="cm-punctuation">,</span> <span class="cm-string">'blocked'</span><span class="cm-punctuation">,</span> <span class="cm-string">'deleted'</span><span class="cm-bracket">)</span><span class="cm-punctuation">;</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -46px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 25px;">28</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation"><span class="cm-keyword">CREATE</span> <span class="cm-keyword">TYPE</span> "friendship_status" <span class="cm-keyword">AS</span> <span class="cm-keyword">ENUM</span> <span class="cm-bracket">(</span><span class="cm-string">'accepted'</span><span class="cm-punctuation">,</span> <span class="cm-string">'pending'</span><span class="cm-punctuation">,</span> <span class="cm-string">'refused'</span><span class="cm-bracket">)</span><span class="cm-punctuation">;</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -46px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 25px;">29</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -46px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 25px;">30</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation"><span class="cm-keyword">CREATE</span> <span class="cm-keyword">TABLE</span> <span class="cm-keyword">public</span>."user"</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -46px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 25px;">31</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation"><span class="cm-bracket">(</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -46px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 25px;">32</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation">    "user_id" <span class="cm-builtin">serial</span> <span class="cm-keyword">NOT</span> <span class="cm-atom">NULL</span><span class="cm-punctuation">,</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -46px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 25px;">33</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation">    "name" <span class="cm-builtin">text</span> <span class="cm-keyword">NOT</span> <span class="cm-atom">NULL</span><span class="cm-punctuation">,</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -46px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 25px;">34</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation">    "email" <span class="cm-builtin">text</span> <span class="cm-keyword">NOT</span> <span class="cm-atom">NULL</span><span class="cm-punctuation">,</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -46px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 25px;">35</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation">    "password" <span class="cm-builtin">text</span> <span class="cm-keyword">NOT</span> <span class="cm-atom">NULL</span><span class="cm-punctuation">,</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -46px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 25px;">36</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">TYPE</span> status <span class="cm-keyword">NOT</span> <span class="cm-atom">NULL</span> <span class="cm-keyword">DEFAULT</span> <span class="cm-string">'normal'</span><span class="cm-punctuation">,</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -46px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 25px;">37</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation">    <span class="cm-keyword">CONSTRAINT</span> "user_pkey" <span class="cm-keyword">PRIMARY</span> <span class="cm-keyword">KEY</span> <span class="cm-bracket">(</span>"user_id"<span class="cm-bracket">)</span><span class="cm-punctuation">,</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -46px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 25px;">38</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation">    <span class="cm-keyword">CONSTRAINT</span> "user_email_key" <span class="cm-keyword">UNIQUE</span> <span class="cm-bracket">(</span>"email"<span class="cm-bracket">)</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -46px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 25px;">39</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation"><span class="cm-bracket">)</span><span class="cm-punctuation">;</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 18px; width: 1px; border-bottom: 0px solid transparent; top: 5342px;"></div><div class="CodeMirror-gutters" style="height: 5360px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 33px;"></div><div class="CodeMirror-gutter CodeMirror-foldgutter"></div></div></div></div></div></div></td></tr></tbody></table></div><div class="wcPanelTabContent wcPanelTabContentHidden" id="1"><table class="wcLayout wcWide wcTall"><tbody><tr><td><div class="pg-panel-content"><div id="history_grid" class="sql-editor-history-container d-flex" tabindex="0"><div style="width: calc(50% - 0.5px);"><div class="toggle-and-history-container">
            <div class="query-history-toggle">
                <label class="control-label">
                    Show queries generated internally by pgAdmin?
                </label>
                <div class="toggle btn btn-success btn-xs quick" data-toggle="toggle" style="width: 0px; height: 0px;"><input id="generated-queries-toggle" type="checkbox" class="pgadmin-controls" data-style="quick" data-size="mini" data-on="Yes" data-off="No" data-onstyle="success" data-offstyle="ternary" checked="checked"><div class="toggle-group"><label class="btn btn-success btn-xs toggle-on">Yes</label><label class="btn btn-ternary btn-xs toggle-off">No</label><span class="toggle-handle btn btn-light btn-xs"></span></div></div>
            </div>
            <div id="query_list" class="query-history" tabindex="0"><div class="query-group" data-key="2020 04 11">
            <div class="date-label">Today - 4/11/2020</div>
            <ul class="query-entries"><li class="list-item selected" tabindex="0" data-key="17:19:08">
          <div class="entry ">
              <div class="query">
                  <span id="query_source_icon" class="query-history-icon sql-icon-lg fa fa-play" role="img"></span>
                  DROP TABLE IF EXISTS 
public."user_interested_in_event";
DROP TABLE IF EXISTS public."friend";
DROP TABLE IF EXISTS public."report";
DROP TABLE IF EXISTS public."notified_user";
DROP TABLE IF EXISTS public."notification";
DROP TABLE IF EXISTS public."user_in_chat";
DROP TABLE IF EXISTS public."user_in_group";
DROP TABLE IF EXISTS public."message";
DROP TABLE IF EXISTS public."chat";
DROP TABLE IF EXISTS public."comment";
DROP TABLE IF EXISTS public."image";
DROP TABLE IF EXISTS public."file";
DROP TABLE IF EXISTS public."post";
DROP TABLE IF EXISTS public."group";
DROP TABLE IF EXISTS public."event";
DROP TABLE IF EXISTS public."organization";
DROP TABLE IF EXISTS public."teacher";
DROP TABLE IF EXISTS public."student";
DROP TABLE IF EXISTS public."regular_user";
DROP TABLE IF EXISTS public."admin";
DROP TABLE IF EXISTS public."user";

DROP TYPE IF EXISTS "friendship_status";
DROP TYPE IF EXISTS status;


CREATE TYPE status AS ENUM ('normal', 'blocked', 'deleted');
CREATE TYPE "friendship_status" AS ENUM ('accepted', 'pending', 
'refused');

CREATE TABLE public."user"
(
    "user_id" serial NOT NULL,
    "name" text NOT NULL,
    "email" text NOT NULL,
    "password" text NOT NULL,
	TYPE status NOT NULL DEFAULT 'normal',
    CONSTRAINT "user_pkey" PRIMARY KEY ("user_id"),
    CONSTRAINT "user_email_key" UNIQUE ("email")
);

CREATE TABLE public."admin"
(
    "admin_id" serial NOT NULL,
	"user_id" integer NOT NULL REFERENCES public."user"("user_id") ON 
DELETE CASCADE,
    CONSTRAINT "admin_pkey" PRIMARY KEY ("admin_id")
);

CREATE TABLE public."regular_user"
(
    "regular_user_id" serial NOT NULL,
	"user_id" integer NOT NULL REFERENCES public."user"("user_id") ON 
DELETE CASCADE,
	"personal_info" text,
    CONSTRAINT "regular_user_pkey" PRIMARY KEY ("regular_user_id")
);

CREATE TABLE public."student"
(
    "student_id" serial NOT NULL,
	"regular_user_id" integer NOT NULL REFERENCES 
public."regular_user"("regular_user_id") ON DELETE CASCADE,
    CONSTRAINT "student_pkey" PRIMARY KEY ("student_id")
);

CREATE TABLE public."teacher"
(
    "teacher_id" serial NOT NULL,
	"regular_user_id" integer NOT NULL REFERENCES 
public."regular_user"("regular_user_id") ON DELETE CASCADE,
    CONSTRAINT "teacher_pkey" PRIMARY KEY ("teacher_id")
);

CREATE TABLE public."organization"
(
    "organization_id" serial NOT NULL,
	"regular_user_id" integer NOT NULL REFERENCES 
public."regular_user"("regular_user_id") ON DELETE CASCADE,
	"approval" boolean NOT NULL DEFAULT FALSE,
    CONSTRAINT "organization_pkey" PRIMARY KEY ("organization_id")
);

CREATE TABLE public."event"
(
	"event_id" serial NOT NULL,
    "organization_id" integer NOT NULL REFERENCES 
public."organization"("organization_id") ON DELETE CASCADE,
	"name" text NOT NULL,
	"location" text NOT NULL,
	"date" timestamp with time zone NOT NULL,
	"information" text NOT NULL,
    CONSTRAINT "event_id_pkey" PRIMARY KEY ("event_id")
);

CREATE TABLE public."group"
(
	"group_id" serial NOT NULL,
	"name" text NOT NULL,
	"information" text NOT NULL,
	TYPE status NOT NULL DEFAULT 'normal',
    CONSTRAINT "group_id_pkey" PRIMARY KEY ("group_id")
);

CREATE TABLE public."user_in_group"
(
	"user_id" integer NOT NULL REFERENCES 
public."regular_user"("regular_user_id") ON DELETE CASCADE,
	"group_id" integer NOT NULL REFERENCES public."group"("group_id") ON 
DELETE CASCADE,
	"admin" boolean NOT NULL DEFAULT FALSE,
	CONSTRAINT "user_in_group_pkey" PRIMARY KEY ("user_id", "group_id")
);

CREATE TABLE public."post"
(
	"post_id" serial NOT NULL,
	"author_id" integer NOT NULL REFERENCES 
public."regular_user"("regular_user_id") ON DELETE CASCADE,
	"title" text NOT NULL,
	"body" text NOT NULL,
	"date" timestamp with time zone NOT NULL DEFAULT now(),
	"upvotes" integer NOT NULL DEFAULT 0,
	"downvotes" integer NOT NULL DEFAULT 0,
	TYPE status NOT NULL DEFAULT 'normal',

	
	"event_id" integer DEFAULT NULL References public."event"("event_id") 
ON DELETE CASCADE,
	"group_id" integer DEFAULT NULL References public."group"("group_id") 
ON DELETE CASCADE,
	
    CONSTRAINT "post_id_pkey" PRIMARY KEY ("post_id"),
	CONSTRAINT "date_ck" CHECK ( "date" &lt;= now() ),
	CONSTRAINT "upvotes_ck" CHECK ( "upvotes" &gt;= 0 ),
	CONSTRAINT "downvotes_ck" CHECK ( "downvotes" &gt;= 0 ),
	CONSTRAINT "bellong_ck" CHECK ( NOT ( ("event_id" IS NOT NULL) AND ( 
"group_id" IS NOT NULL ) )  )
);

CREATE TABLE public."file"
(
	"file_id" serial NOT NULL,
	"post_id" integer REFERENCES public."post"("post_id"),
	"file_path" text NOT NULL,
	
	CONSTRAINT "file_id_pkey" PRIMARY KEY ("file_id")
);

CREATE TABLE public."image"
(
	"image_id" serial NOT NULL,
	"file_id" integer NOT NULL REFERENCES public."file"("file_id") ON 
DELETE CASCADE,
	"group_id" integer DEFAULT NULL REFERENCES public."group"("group_id") 
ON DELETE CASCADE,
	"event_id" integer DEFAULT NULL REFERENCES public."event"("event_id") 
ON DELETE CASCADE,
	"regular_user_id" integer  DEFAULT NULL REFERENCES 
public."regular_user"("regular_user_id") ON DELETE CASCADE,
	"post_id" integer DEFAULT NULL REFERENCES public."post"("post_id") ON 
DELETE CASCADE,
	
	CONSTRAINT "image_id_pkey" PRIMARY KEY ("image_id"),
	CONSTRAINT "bellong_ck" CHECK ( (Case when ("group_id" iS NOT NULL) 
then 1 else 0 end)  + 
								 	(Case when ("event_id" iS NOT NULL) then 1 else 0 end) + 
								    (Case when ("regular_user_id" iS NOT NULL) then 1 else 0 
end) + 
								    (Case when ("post_id" iS NOT NULL) then 1 else 0 end) = 1)
);

CREATE TABLE public."comment"
(
	"comment_id" serial NOT NULL,
	"user_id" integer NOT NULl, --NEW
	"post_id" integer DEFAULT NULL REFERENCES public."post"("post_id") ON 
DELETE CASCADE,
	"comment_to_id" integer DEFAULT NULL REFERENCES 
public."comment"("comment_id") ON DELETE CASCADE,
	"body" text NOT NULL,
	"date" timestamp with time zone NOT NULL DEFAULT now(),
	"upvotes" integer NOT NULL DEFAULT 0,
	"downvotes" integer NOT NULL DEFAULT 0,
	
	
	CONSTRAINT "comment_id_pkey" PRIMARY KEY ("comment_id"),
	CONSTRAINT "dif_cmmt" CHECK ( "comment_id" != "comment_to_id" ),
	CONSTRAINT "date_ck" CHECK ( "date" &lt;= now() ),
	CONSTRAINT "upvotes_ck" CHECK ( "upvotes" &gt;= 0 ),
	CONSTRAINT "downvotes_ck" CHECK ( "downvotes" &gt;= 0 ),
	CONSTRAINT "bellong_ck" CHECK ( (("post_id" is NOT NULL) AND 
("comment_to_id" IS NULL)) or (("post_id" is NULL) AND ("comment_to_id" 
IS NOT NULL)))
);

CREATE TABLE public."chat"
(
	"chat_id" serial NOT NULL,
	CONSTRAINT "chat_id_pkey" PRIMARY KEY ("chat_id")
);

CREATE TABLE public."message"
(
	"message_id" serial NOT NULL,
	"sender_id" integer NOT NULL REFERENCES 
public."regular_user"("regular_user_id") ON DELETE CASCADE,
	"chat_id" integer NOT NULL REFERENCES public."chat"("chat_id") ON 
DELETE CASCADE,
	"body" text NOT NULL,
	"date" timestamp with time zone NOT NULL DEFAULT now(),
	
	CONSTRAINT "message_id_pkey" PRIMARY KEY ("message_id"),
	CONSTRAINT "date_ck" CHECK ( "date" &lt;= now() )
);

CREATE TABLE public."user_in_chat"
(
	"user_id" integer NOT NULL REFERENCES 
public."regular_user"("regular_user_id") ON DELETE CASCADE,
	"chat_id" integer NOT NULL REFERENCES public."chat"("chat_id") ON 
DELETE CASCADE,
	CONSTRAINT "user_in_chat_pkey" PRIMARY KEY ("user_id", "chat_id")
);

CREATE TABLE public."notification"
(
	"notification_id" serial NOT NULL,
	"origin_user_id" integer NOT NULL REFERENCES 
public."regular_user"("regular_user_id") ON DELETE CASCADE,
	"description" text NOT NULL,
	"link" text NOT NULL,
	"date" timestamp with time zone NOT NULL DEFAULT now(),
	
	CONSTRAINT "notification_id_pkey" PRIMARY KEY ("notification_id"),
	CONSTRAINT "date_ck" CHECK ( "date" &lt;= now() )
);

CREATE TABLE public."notified_user"
(
	"notification_id" integer NOT NULL REFERENCES 
public."notification"("notification_id") ON DELETE CASCADE,
	"user_notified" integer NOT NULL REFERENCES 
public."regular_user"("regular_user_id") ON DELETE CASCADE,
	"seen" boolean DEFAULT FALSE NOT NULL,
	CONSTRAINT "notified_user_pkey" PRIMARY KEY ("notification_id", 
"user_notified")
);


CREATE TABLE public."report"
(
	"report_id"  serial NOT NULL,
	"reporter_id" integer NOT NULL REFERENCES 
public."regular_user"("regular_user_id") ON DELETE CASCADE,
	"approval" boolean DEFAULT NULL,
	"reason" text NOT NULL,
	
	"reported_user_id" integer REFERENCES 
public."regular_user"("regular_user_id") ON DELETE CASCADE,
	"reported_event_id" integer REFERENCES public."event"("event_id") ON 
DELETE CASCADE,
	"reported_post_id" integer REFERENCES public."post"("post_id") ON 
DELETE CASCADE,
	"reported_comment_id" integer REFERENCES public."comment"("comment_id")
 ON DELETE CASCADE,
	"reported_group_id" integer REFERENCES public."group"("group_id") ON 
DELETE CASCADE,
	
	CONSTRAINT "report_pkey" PRIMARY KEY ("report_id"),
		CONSTRAINT "bellong_ck" CHECK ( (Case when ("reported_user_id" iS NOT 
NULL) then 1 else 0 end)  + 
								 	(Case when ("reported_event_id" iS NOT NULL) then 1 else 0 
end) + 
									(Case when ("reported_post_id" iS NOT NULL) then 1 else 0 end) +
 
								    (Case when ("reported_comment_id" iS NOT NULL) then 1 else 0
 end) + 
								    (Case when ("reported_group_id" iS NOT NULL) then 1 else 0 
end) = 1)
);


CREATE TABLE public."friend"
(
	"friend_id1" integer NOT NULL REFERENCES 
public."regular_user"("regular_user_id") ON DELETE CASCADE,
	"friend_id2" integer NOT NULL REFERENCES 
public."regular_user"("regular_user_id") ON DELETE CASCADE,
	TYPE "friendship_status" NOT NULL DEFAULT 'pending',
	CONSTRAINT "friend_pkey" PRIMARY KEY ("friend_id1", "friend_id2")
);

CREATE TABLE public."user_interested_in_event"
(
	"user_id" integer NOT NULL REFERENCES public."user"("user_id") ON 
DELETE CASCADE,
	"event_id" integer NOT NULL REFERENCES public."event"("event_id") ON 
DELETE CASCADE,
	CONSTRAINT "user_interested_in_event_pkey" PRIMARY KEY ("user_id", 
"event_id")
);
              </div>
              <div class="other-info">
              <div class="timestamp">17:19:08</div>
              </div>
          </div>
      </li><li class="list-item" tabindex="0" data-key="17:19:00">
          <div class="entry error">
              <div class="query">
                  <span id="query_source_icon" class="query-history-icon sql-icon-lg fa fa-play" role="img"></span>
                  DROP TABLE IF EXISTS 
public."user_interested_in_event";
DROP TABLE IF EXISTS public."friend";
DROP TABLE IF EXISTS public."report";
DROP TABLE IF EXISTS public."notified_user";
DROP TABLE IF EXISTS public."notification";
DROP TABLE IF EXISTS public."user_in_chat";
DROP TABLE IF EXISTS public."user_in_group";
DROP TABLE IF EXISTS public."message";
DROP TABLE IF EXISTS public."chat";
DROP TABLE IF EXISTS public."comment";
DROP TABLE IF EXISTS public."image";
DROP TABLE IF EXISTS public."file";
DROP TABLE IF EXISTS public."post";
DROP TABLE IF EXISTS public."group";
DROP TABLE IF EXISTS public."event";
DROP TABLE IF EXISTS public."organization";
DROP TABLE IF EXISTS public."teacher";
DROP TABLE IF EXISTS public."student";
DROP TABLE IF EXISTS public."regular_user";
DROP TABLE IF EXISTS public."admin";
DROP TABLE IF EXISTS public."user";

DROP TYPE IF EXISTS "friendship_status";
DROP TYPE IF EXISTS status;

CREATE TYPE status AS ENUM ('normal', 'blocked', 'deleted');
CREATE TYPE "friendship_status" AS ENUM ('accepted', 'pending', 
'refused');

DROP INDEX IF EXISTS "user_notified"; 
DROP INDEX IF EXISTS "notified_user_notification_id";
DROP INDEX IF EXISTS "student_regular_id";
DROP INDEX IF EXISTS "teacher_regular_id";
DROP INDEX IF EXISTS "organization_regular_id";
DROP INDEX IF EXISTS "post_author_id";
DROP INDEX IF EXISTS "post_event_id";
DROP INDEX IF EXISTS "post_group_id";
DROP INDEX IF EXISTS "comment_post_id";
DROP INDEX IF EXISTS "comment_comment_to_id";
DROP INDEX IF EXISTS "event_organizer";
DROP INDEX IF EXISTS "accepted_friendship";
DROP INDEX IF EXISTS "pending_friendship";
DROP INDEX IF EXISTS "message_chat";
DROP INDEX IF EXISTS "file_post_id";
DROP INDEX IF EXISTS "comment_date";
DROP INDEX IF EXISTS "message_date";
DROP INDEX IF EXISTS "post_date";
DROP INDEX IF EXISTS "search_post_titles";
DROP INDEX IF EXISTS "search_user_names";
DROP INDEX IF EXISTS "search_group_names";
DROP INDEX IF EXISTS "search_event_names";

CREATE TABLE public."user"
(
    "user_id" serial NOT NULL,
    "name" text NOT NULL,
    "email" text NOT NULL,
    "password" text NOT NULL,
	TYPE status NOT NULL DEFAULT 'normal',
    CONSTRAINT "user_pkey" PRIMARY KEY ("user_id"),
    CONSTRAINT "user_email_key" UNIQUE ("email")
);

CREATE TABLE public."admin"
(
    "admin_id" serial NOT NULL,
	"user_id" integer NOT NULL REFERENCES public."user"("user_id") ON 
DELETE CASCADE,
    CONSTRAINT "admin_pkey" PRIMARY KEY ("admin_id")
);

CREATE TABLE public."regular_user"
(
    "regular_user_id" serial NOT NULL,
	"user_id" integer NOT NULL REFERENCES public."user"("user_id") ON 
DELETE CASCADE,
	"personal_info" text,
    CONSTRAINT "regular_user_pkey" PRIMARY KEY ("regular_user_id")
);

CREATE TABLE public."student"
(
    "student_id" serial NOT NULL,
	"regular_user_id" integer NOT NULL REFERENCES 
public."regular_user"("regular_user_id") ON DELETE CASCADE,
    CONSTRAINT "student_pkey" PRIMARY KEY ("student_id")
);

CREATE TABLE public."teacher"
(
    "teacher_id" serial NOT NULL,
	"regular_user_id" integer NOT NULL REFERENCES 
public."regular_user"("regular_user_id") ON DELETE CASCADE,
    CONSTRAINT "teacher_pkey" PRIMARY KEY ("teacher_id")
);

CREATE TABLE public."organization"
(
    "organization_id" serial NOT NULL,
	"regular_user_id" integer NOT NULL REFERENCES 
public."regular_user"("regular_user_id") ON DELETE CASCADE,
	"approval" boolean NOT NULL DEFAULT FALSE,
    CONSTRAINT "organization_pkey" PRIMARY KEY ("organization_id")
);

CREATE TABLE public."event"
(
	"event_id" serial NOT NULL,
    "organization_id" integer NOT NULL REFERENCES 
public."organization"("organization_id") ON DELETE CASCADE,
	"name" text NOT NULL,
	"location" text NOT NULL,
	"date" timestamp with time zone NOT NULL,
	"information" text NOT NULL,
    CONSTRAINT "event_id_pkey" PRIMARY KEY ("event_id")
);

CREATE TABLE public."group"
(
	"group_id" serial NOT NULL,
	"name" text NOT NULL,
	"information" text NOT NULL,
	TYPE status NOT NULL DEFAULT 'normal',
    CONSTRAINT "group_id_pkey" PRIMARY KEY ("group_id")
);

CREATE TABLE public."user_in_group"
(
	"user_id" integer NOT NULL REFERENCES 
public."regular_user"("regular_user_id") ON DELETE CASCADE,
	"group_id" integer NOT NULL REFERENCES public."group"("group_id") ON 
DELETE CASCADE,
	"admin" boolean NOT NULL DEFAULT FALSE,
	CONSTRAINT "user_in_group_pkey" PRIMARY KEY ("user_id", "group_id")
);

CREATE TABLE public."post"
(
	"post_id" serial NOT NULL,
	"author_id" integer NOT NULL REFERENCES 
public."regular_user"("regular_user_id") ON DELETE CASCADE,
	"title" text NOT NULL,
	"body" text NOT NULL,
	"date" timestamp with time zone NOT NULL DEFAULT now(),
	"upvotes" integer NOT NULL DEFAULT 0,
	"downvotes" integer NOT NULL DEFAULT 0,
	TYPE status NOT NULL DEFAULT 'normal',

	
	"event_id" integer DEFAULT NULL References public."event"("event_id") 
ON DELETE CASCADE,
	"group_id" integer DEFAULT NULL References public."group"("group_id") 
ON DELETE CASCADE,
	
    CONSTRAINT "post_id_pkey" PRIMARY KEY ("post_id"),
	CONSTRAINT "date_ck" CHECK ( "date" &lt;= now() ),
	CONSTRAINT "upvotes_ck" CHECK ( "upvotes" &gt;= 0 ),
	CONSTRAINT "downvotes_ck" CHECK ( "downvotes" &gt;= 0 ),
	CONSTRAINT "bellong_ck" CHECK ( NOT ( ("event_id" IS NOT NULL) AND ( 
"group_id" IS NOT NULL ) )  )
);

CREATE TABLE public."file"
(
	"file_id" serial NOT NULL,
	"post_id" integer REFERENCES public."post"("post_id"),
	"file_path" text NOT NULL,
	
	CONSTRAINT "file_id_pkey" PRIMARY KEY ("file_id")
);

CREATE TABLE public."image"
(
	"image_id" serial NOT NULL,
	"file_id" integer NOT NULL REFERENCES public."file"("file_id") ON 
DELETE CASCADE,
	"group_id" integer DEFAULT NULL REFERENCES public."group"("group_id") 
ON DELETE CASCADE,
	"event_id" integer DEFAULT NULL REFERENCES public."event"("event_id") 
ON DELETE CASCADE,
	"regular_user_id" integer  DEFAULT NULL REFERENCES 
public."regular_user"("regular_user_id") ON DELETE CASCADE,
	"post_id" integer DEFAULT NULL REFERENCES public."post"("post_id") ON 
DELETE CASCADE,
	
	CONSTRAINT "image_id_pkey" PRIMARY KEY ("image_id"),
	CONSTRAINT "bellong_ck" CHECK ( (Case when ("group_id" iS NOT NULL) 
then 1 else 0 end)  + 
								 	(Case when ("event_id" iS NOT NULL) then 1 else 0 end) + 
								    (Case when ("regular_user_id" iS NOT NULL) then 1 else 0 
end) + 
								    (Case when ("post_id" iS NOT NULL) then 1 else 0 end) = 1)
);

CREATE TABLE public."comment"
(
	"comment_id" serial NOT NULL,
	"user_id" integer NOT NULl, --NEW
	"post_id" integer DEFAULT NULL REFERENCES public."post"("post_id") ON 
DELETE CASCADE,
	"comment_to_id" integer DEFAULT NULL REFERENCES 
public."comment"("comment_id") ON DELETE CASCADE,
	"body" text NOT NULL,
	"date" timestamp with time zone NOT NULL DEFAULT now(),
	"upvotes" integer NOT NULL DEFAULT 0,
	"downvotes" integer NOT NULL DEFAULT 0,
	
	
	CONSTRAINT "comment_id_pkey" PRIMARY KEY ("comment_id"),
	CONSTRAINT "dif_cmmt" CHECK ( "comment_id" != "comment_to_id" ),
	CONSTRAINT "date_ck" CHECK ( "date" &lt;= now() ),
	CONSTRAINT "upvotes_ck" CHECK ( "upvotes" &gt;= 0 ),
	CONSTRAINT "downvotes_ck" CHECK ( "downvotes" &gt;= 0 ),
	CONSTRAINT "bellong_ck" CHECK ( (("post_id" is NOT NULL) AND 
("comment_to_id" IS NULL)) or (("post_id" is NULL) AND ("comment_to_id" 
IS NOT NULL)))
);

CREATE TABLE public."chat"
(
	"chat_id" serial NOT NULL,
	CONSTRAINT "chat_id_pkey" PRIMARY KEY ("chat_id")
);

CREATE TABLE public."message"
(
	"message_id" serial NOT NULL,
	"sender_id" integer NOT NULL REFERENCES 
public."regular_user"("regular_user_id") ON DELETE CASCADE,
	"chat_id" integer NOT NULL REFERENCES public."chat"("chat_id") ON 
DELETE CASCADE,
	"body" text NOT NULL,
	"date" timestamp with time zone NOT NULL DEFAULT now(),
	
	CONSTRAINT "message_id_pkey" PRIMARY KEY ("message_id"),
	CONSTRAINT "date_ck" CHECK ( "date" &lt;= now() )
);

CREATE TABLE public."user_in_chat"
(
	"user_id" integer NOT NULL REFERENCES 
public."regular_user"("regular_user_id") ON DELETE CASCADE,
	"chat_id" integer NOT NULL REFERENCES public."chat"("chat_id") ON 
DELETE CASCADE,
	CONSTRAINT "user_in_chat_pkey" PRIMARY KEY ("user_id", "chat_id")
);

CREATE TABLE public."notification"
(
	"notification_id" serial NOT NULL,
	"origin_user_id" integer NOT NULL REFERENCES 
public."regular_user"("regular_user_id") ON DELETE CASCADE,
	"description" text NOT NULL,
	"link" text NOT NULL,
	"date" timestamp with time zone NOT NULL DEFAULT now(),
	
	CONSTRAINT "notification_id_pkey" PRIMARY KEY ("notification_id"),
	CONSTRAINT "date_ck" CHECK ( "date" &lt;= now() )
);

CREATE TABLE public."notified_user"
(
	"notification_id" integer NOT NULL REFERENCES 
public."notification"("notification_id") ON DELETE CASCADE,
	"user_notified" integer NOT NULL REFERENCES 
public."regular_user"("regular_user_id") ON DELETE CASCADE,
	"seen" boolean DEFAULT FALSE NOT NULL,
	CONSTRAINT "notified_user_pkey" PRIMARY KEY ("notification_id", 
"user_notified")
);


CREATE TABLE public."report"
(
	"report_id"  serial NOT NULL,
	"reporter_id" integer NOT NULL REFERENCES 
public."regular_user"("regular_user_id") ON DELETE CASCADE,
	"approval" boolean DEFAULT NULL,
	"reason" text NOT NULL,
	
	"reported_user_id" integer REFERENCES 
public."regular_user"("regular_user_id") ON DELETE CASCADE,
	"reported_event_id" integer REFERENCES public."event"("event_id") ON 
DELETE CASCADE,
	"reported_post_id" integer REFERENCES public."post"("post_id") ON 
DELETE CASCADE,
	"reported_comment_id" integer REFERENCES public."comment"("comment_id")
 ON DELETE CASCADE,
	"reported_group_id" integer REFERENCES public."group"("group_id") ON 
DELETE CASCADE,
	
	CONSTRAINT "report_pkey" PRIMARY KEY ("report_id"),
		CONSTRAINT "bellong_ck" CHECK ( (Case when ("reported_user_id" iS NOT 
NULL) then 1 else 0 end)  + 
								 	(Case when ("reported_event_id" iS NOT NULL) then 1 else 0 
end) + 
									(Case when ("reported_post_id" iS NOT NULL) then 1 else 0 end) +
 
								    (Case when ("reported_comment_id" iS NOT NULL) then 1 else 0
 end) + 
								    (Case when ("reported_group_id" iS NOT NULL) then 1 else 0 
end) = 1)
);


CREATE TABLE public."friend"
(
	"friend_id1" integer NOT NULL REFERENCES 
public."regular_user"("regular_user_id") ON DELETE CASCADE,
	"friend_id2" integer NOT NULL REFERENCES 
public."regular_user"("regular_user_id") ON DELETE CASCADE,
	TYPE "friendship_status" NOT NULL DEFAULT 'pending',
	CONSTRAINT "friend_pkey" PRIMARY KEY ("friend_id1", "friend_id2")
);

CREATE TABLE public."user_interested_in_event"
(
	"user_id" integer NOT NULL REFERENCES public."user"("user_id") ON 
DELETE CASCADE,
	"event_id" integer NOT NULL REFERENCES public."event"("event_id") ON 
DELETE CASCADE,
	CONSTRAINT "user_interested_in_event_pkey" PRIMARY KEY ("user_id", 
"event_id")
);



-- USER NOTIFIED INDEX
CREATE INDEX "user_notified" ON "notified_user" USING 
hash("user_notified");
CREATE INDEX "notified_user_notification_id" ON "notified_user" USING 
hash("notification_id");

-- REGULAR USER ID FOREIGN KEYS INDEXES
CREATE INDEX "student_regular_id" ON "student" USING 
hash("regular_user_id");
CREATE INDEX "teacher_regular_id" ON "teacher" USING 
hash("regular_user_id");
CREATE INDEX "organization_regular_id" ON "organization" USING 
hash("regular_user_id");
CREATE INDEX "post_author_id" ON "post" USING hash("author_id");

-- POST FOREIGN KEYS INDEXES
CREATE INDEX "post_event_id" ON "post" USING hash("event_id") WHERE 
"event_id" IS NOT NULL;
CREATE INDEX "post_group_id" ON "post" USING hash("group_id") WHERE 
"group_id" IS NOT NULL; 

-- COMMENT FOREIGN KEYS INDEXES  
CREATE INDEX "comment_post_id" ON "comment" USING hash("post_id") WHERE 
"post_id" IS NOT NULL;
CREATE INDEX "comment_comment_to_id" ON "comment" USING 
hash("comment_to_id") WHERE "comment_to_id" IS NOT NULL;

-- EVENT ORGANIZER INDEX
CREATE INDEX "event_organizer" ON "event" USING hash("organization_id");

-- FRIENDSHIP INDEX
CREATE INDEX "accepted_friendship" ON "friend" USING hash("friend_id1") 
WHERE TYPE = 'accepted';
CREATE INDEX "pending_friendship" ON "friend" USING hash("friend_id1") 
WHERE TYPE = 'pending';

-- CHAT INDEX
CREATE INDEX "message_chat" ON "message" USING hash("chat_id");

-- FILE INDEX
CREATE INDEX "file_post_id" ON "file" USING hash("post_id");

-- DATE INDEXES
CREATE INDEX "message_date" ON "message" USING btree("date");
CREATE INDEX "comment_date" ON "comment" USING btree("date");
CREATE INDEX "post_date" ON "post" USING btree("date");

-- GIST SEARCH INDEXES 
CREATE INDEX "search_post_titles" ON "post" USING 
GIST(to_tsvector('english', "title" || ' ' || "body"));
CREATE INDEX "search_user_names" ON "user" USING 
GIST(to_tsvector('english', "name"));
CREATE INDEX "search_group_names" ON "group" USING 
GIST(to_tsvector('english', "name"));
CREATE INDEX "search_event_names" ON "event" USING 
GIST(to_tsvector('english', "name"));


DROP TRIGGER IF EXISTS update_group_posts ON "group" CASCADE;
DROP TRIGGER IF EXISTS update_event_posts ON "event" CASCADE;
DROP TRIGGER IF EXISTS update_user_posts ON "user" CASCADE;
DROP TRIGGER IF EXISTS friend_status ON "friend" CASCADE;
DROP TRIGGER IF EXISTS delete_refused_report ON "report" CASCADE;
DROP TRIGGER IF EXISTS event_date ON "event" CASCADE;
DROP TRIGGER IF EXISTS post_date ON "post" CASCADE;
DROP TRIGGER IF EXISTS unique_org ON "organization" CASCADE;

DROP FUNCTION IF EXISTS update_group_posts() CASCADE;
DROP FUNCTION IF EXISTS update_event_posts() CASCADE;
DROP FUNCTION IF EXISTS update_user_posts() CASCADE;
DROP FUNCTION IF EXISTS friend_status() CASCADE;
DROP FUNCTION IF EXISTS delete_refused_report() CASCADE;
DROP FUNCTION IF EXISTS event_date() CASCADE;
DROP FUNCTION IF EXISTS post_date() CASCADE;
DROP FUNCTION IF EXISTS unique_org() CASCADE;

CREATE FUNCTION update_group_posts() RETURNS TRIGGER AS
$BODY$
BEGIN
    UPDATE public."post" SET public."post".TYPE = public."group".TYPE 
WHERE public."post"."group_id" = public."group"."group_id";
    RETURN NEW;
END
$BODY$
LANGUAGE plpgsql;


CREATE TRIGGER update_group_posts
    AFTER UPDATE ON public."group"
    FOR EACH ROW
    EXECUTE PROCEDURE update_group_posts();



CREATE FUNCTION update_event_posts() RETURNS TRIGGER AS
$BODY$
BEGIN
    UPDATE public."post" SET public."post".TYPE = public."event".TYPE 
WHERE public."post"."event_id" = public."event"."event_id";
    RETURN NEW;
END
$BODY$
LANGUAGE plpgsql;


CREATE TRIGGER update_event_posts
    AFTER UPDATE ON public."event"
    FOR EACH ROW
    EXECUTE PROCEDURE update_event_posts();



CREATE FUNCTION update_user_posts() RETURNS TRIGGER AS
$BODY$
BEGIN
    UPDATE public."post" SET public."post".TYPE = public."user".TYPE 
WHERE public."post"."author_id" = public."user"."user_id";
    RETURN NEW;
END
$BODY$
LANGUAGE plpgsql;


CREATE TRIGGER update_user_posts
    AFTER UPDATE ON public."user"
    FOR EACH ROW
    EXECUTE PROCEDURE update_user_posts();



CREATE FUNCTION friend_status() RETURNS trigger AS
$$
BEGIN
	IF new."friendship_status" = 'accepted' THEN
		Insert into public."friend" 
("friend_id1","friend_id2","friendship_status") values 
(old.public."friend_id2",old.public."friend_id1",'accepted');
	ELSEIF new."friendship_status" = 'refused' THEN
		DELETE FROM public."friend" 
        WHERE ("friend_id1" = old.public."friend_id1" AND "friend_id2" =
 old.public."friend_id2");
    END IF; 
    RETURN NEW;
END
$$
LANGUAGE plpgsql;


Create TRIGGER friend_status
	AFTER UPDATE ON public."friend"
	EXECUTE PROCEDURE friend_status();



CREATE FUNCTION delete_refused_report() RETURNS trigger AS
$BODY$
BEGIN
    IF new."approval" = FALSE THEN
        DELETE FROM public."report"
        WHERE "report_id" = old.public."report_id";
    END IF;
    RETURN NEW;
END
$BODY$
LANGUAGE plpgsql;

CREATE TRIGGER delete_refused_report
    AFTER UPDATE ON public."report"
    EXECUTE PROCEDURE delete_refused_report();



CREATE FUNCTION event_date() RETURNS trigger AS
$BODY$
BEGIN
    IF New."date" &lt; now() THEN
    RAISE EXCEPTION 'Invalid event date.';
    END IF;
	RETURN NEW;
    

END
$BODY$
LANGUAGE plpgsql;

CREATE TRIGGER event_date
    AFTER INSERT ON public."event"
	FOR EACH ROW
    EXECUTE PROCEDURE event_date();



CREATE FUNCTION post_date() RETURNS trigger AS
$BODY$
BEGIN
    IF new."date" &gt; now() THEN
    RAISE EXCEPTION 'Invalid post date.';
    END IF;
    RETURN NEW;

END
$BODY$
LANGUAGE plpgsql;

CREATE TRIGGER post_date
    AFTER INSERT ON public."post"
	FOR EACH ROW
    EXECUTE PROCEDURE post_date();



CREATE FUNCTION unique_org() RETURNS trigger AS
$BODY$
BEGIN
	IF new."approval" = TRUE THEN
    	IF EXISTS (Select * from
				  	(SELECT * FROM "organization" INNER JOIN "regular_user" on 
"organization"."regular_user_id" = "regular_user"."regular_user_id"
						INNER JOIN "user" on "regular_user"."user_id" = "user"."user_id" 
where "organization"."approval" = TRUE) as "t1"
				   	INNER JOIN
				   	(SELECT * FROM "organization" INNER JOIN "regular_user" on 
"organization"."regular_user_id" = "regular_user"."regular_user_id"
						INNER JOIN "user" on "regular_user"."user_id" = "user"."user_id" 
where "organization"."organization_id" = new."organization_id") as "t2"
				   	on t1."name" = "t2"."name"
				  	) 
		THEN
			RAISE EXCEPTION 'Two organizations approved with same name';
		END IF;
	END IF;
	RETURN NEW;

END
$BODY$
LANGUAGE plpgsql;

CREATE TRIGGER unique_org
    BEFORE UPDATE ON public."organization"
    EXECUTE PROCEDURE unique_org();

BEGIN TRANSACTION ISOLATION LEVEL REPEATABLE READ; 
 
-- Insert user
 INSERT INTO "user" ("name", "email", "password") 
  VALUES ($name, $email, $password); 
 
-- Insert regular_user 
 INSERT INTO "regular_user" ("user_id", "personal_info") 
  VALUES (currval('user_user_id_seq'), $info); 

--Insert student
 INSERT INTO "student" ("regular_user_id")
  VALUES (currval('regular_user_regular_user_id_seq'));

COMMIT;


BEGIN TRANSACTION ISOLATION LEVEL REPEATABLE READ; 
 
-- Insert user
 INSERT INTO "user" ("name", "email", "password") 
  VALUES ($name, $email, $password); 
 
-- Insert regular_user 
 INSERT INTO "regular_user" ("user_id", "personal_info") 
  VALUES (currval('user_user_id_seq'), $info); 

--Insert teacher
 INSERT INTO "teacher" ("regular_user_id")
  VALUES (currval('regular_user_regular_user_id_seq'));

COMMIT;


BEGIN TRANSACTION ISOLATION LEVEL REPEATABLE READ; 
 
-- Insert user
 INSERT INTO "user" ("name", "email", "password") 
  VALUES ($name, $email, $password); 
 
-- Insert regular_user 
 INSERT INTO "regular_user" ("user_id", "personal_info") 
  VALUES (currval('user_user_id_seq'), $info); 

--Insert organization
 INSERT INTO "organization" ("regular_user_id")
  VALUES (currval('regular_user_regular_user_id_seq'));

COMMIT;
              </div>
              <div class="other-info">
              <div class="timestamp">17:19:00</div>
              </div>
          </div>
      </li></ul>
        </div><div class="query-group" data-key="2020 03 29">
            <div class="date-label">3/29/2020</div>
            <ul class="query-entries"><li class="list-item" tabindex="0" data-key="17:55:45">
          <div class="entry error">
              <div class="query">
                  <span id="query_source_icon" class="query-history-icon sql-icon-lg fa fa-play" role="img"></span>
                  
-- my info
Select "user_id", "name" from "user" where "email" = 'jokinho@feup.pt';


-- if is admin
Select "admin_id" from "admin" where "user_id" = 24;

-- if is regular_user
Select "regular_user_id", "personal_info" from "regular_user" where 
"user_id" = 4;

--if is a student
Select "student_id" from "student" where "regular_user_id" = 5;

-- if is a teacher
Select "teacher_id" from "teacher" where "regular_user_id" = 3;

-- if is an organization
Select "organization_id" from "organization" where "regular_user_id" = 
4;


-- Select user from a group
Select "user_id" from "user_in_group" where "group_id" = 1;

--events of organization
Select "name", "location", "date", "information" from "event" where 
"organization_id" = 1;


--Posts posted by me
Select "title", "body", "date", "upvotes", "downvotes", TYPE, 
"event_id", "group_id" 
	from "post" where "author_id" = 2;


--Notification
Select "origin_user_id", "description", "link", "date" from 
"notification"
	INNER JOIN "notified_user" on "notification"."notification_id" 
="notified_user"."notification_id" 
	where "user_notified" = 5;


--Message by chat
Select "sender_id", "body", "date"
	from "message" where "chat_id" = 2
	order by "date" DESC;


--Comments
 Select "comment_id", "user_id", "comment_to_id", "body", "date", 
"upvotes", "downvotes"
	from "comment" where "post_id" = 5
	order by "date" DESC;


--Posts from event
Select "author_id", "title", "body", "date", "upvotes", "downvotes", 
TYPE, "event_id", "group_id" 
	from "post" where "event_id" = 1;

--Posts from group
Select "author_id", "title", "body", "date", "upvotes", "downvotes", 
TYPE, "event_id", "group_id" 
	from "post" where "group_id" = 1;


	
-- Select all regular users with starting name like...
Select "name" , "user"."user_id" , "regular_user"."regular_user_id" from
 "user" 
	INNER JOIN "regular_user" on "regular_user"."user_id" = 
"user"."user_id"  
	where "user"."name" LIKE 'A%';

-- Select Reports that have no answer
Select "reporter_id", "approval", "reason", "reported_user_id", 
"reported_event_id", "reported_post_id", "reported_comment_id", 
"reported_group_id"
	from "report" where "approval" IS NULL;


--Select friends
Select "friend_id2"
	from "friend" where (TYPE = 'accepted' and "friend_id1" = 2);


--Select pending requests (the user that hasn't answered)
Select "friend_id2"
	from "friend" where (TYPE = 'pending' and "friend_id1" = 2);
	

--Files path from Posts

Select "file_path"
	from "file" INNER JOIN "post" on "post"."post_id" = "file"."post_id" 
where "post"."post_id" = 7 order by "date" DESC;

--Event informations of events I am interested on
Select "event"."event_id", "organization_id", "name", "location", 
"date", "information"
	FROM "event" INNER JOIN "user_interested_in_event" 
	on "event"."event_id" = "user_interested_in_event"."event_id"
	Where "user_interested_in_event"."user_id" = 2;
	
--Select group infomation of groups I belong
Select "group"."group_id" , "name", "information", TYPE
	from "user_in_group" INNER JOIN "group"
	on "user_in_group"."group_id" = "group"."group_id"
	where "user_id" = 2;

--Posts from groups I belong, users I am friends with and events I am 
interested on (Feed)
Select * from (
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "event_id", "post"."group_id" 
		from "post" INNER JOIN "user_in_group" on "post"."group_id" = 
"user_in_group"."group_id" 
		where "user_in_group"."user_id" = 2
	UNION
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "event_id", "post"."group_id" 
		from "post" INNER JOIN "friend" on "friend"."friend_id2" = 
"post"."author_id" 
		WHERE "friend".TYPE = 'accepted' AND "friend"."friend_id1" = 2
	UNION
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "post"."event_id", "post"."group_id" 
		from "post" INNER JOIN "user_interested_in_event" 
		on "post"."event_id" = "user_interested_in_event"."event_id"
		WHERE "user_interested_in_event"."user_id" = 2
) as posts
	NATURAL JOIN

(Select "post_id",count("post_id") from "comment" GROUP BY "post_id") as
 "comments" ;
	


-- Select all regular users and post with starting name ou title ou body
 is like something...
Select * from (
				(Select "name" , "user"."user_id" , "regular_user"."regular_user_id"
 from "user" 
				INNER JOIN "regular_user" on "regular_user"."user_id" = 
"user"."user_id"  
				where "user"."name" LIKE 'A%')
				 
				JOIN
				(Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "post"."event_id", "post"."group_id" from
					"post" where "post"."body" LIKE '%para%' or "post"."title" LIKE 
'%para%'
				)
	);
	
	
              </div>
              <div class="other-info">
              <div class="timestamp">17:55:45</div>
              </div>
          </div>
      </li><li class="list-item" tabindex="0" data-key="17:55:34">
          <div class="entry error">
              <div class="query">
                  <span id="query_source_icon" class="query-history-icon sql-icon-lg fa fa-play" role="img"></span>
                  
-- my info
Select "user_id", "name" from "user" where "email" = 'jokinho@feup.pt';


-- if is admin
Select "admin_id" from "admin" where "user_id" = 24;

-- if is regular_user
Select "regular_user_id", "personal_info" from "regular_user" where 
"user_id" = 4;

--if is a student
Select "student_id" from "student" where "regular_user_id" = 5;

-- if is a teacher
Select "teacher_id" from "teacher" where "regular_user_id" = 3;

-- if is an organization
Select "organization_id" from "organization" where "regular_user_id" = 
4;


-- Select user from a group
Select "user_id" from "user_in_group" where "group_id" = 1;

--events of organization
Select "name", "location", "date", "information" from "event" where 
"organization_id" = 1;


--Posts posted by me
Select "title", "body", "date", "upvotes", "downvotes", TYPE, 
"event_id", "group_id" 
	from "post" where "author_id" = 2;


--Notification
Select "origin_user_id", "description", "link", "date" from 
"notification"
	INNER JOIN "notified_user" on "notification"."notification_id" 
="notified_user"."notification_id" 
	where "user_notified" = 5;


--Message by chat
Select "sender_id", "body", "date"
	from "message" where "chat_id" = 2
	order by "date" DESC;


--Comments
 Select "comment_id", "user_id", "comment_to_id", "body", "date", 
"upvotes", "downvotes"
	from "comment" where "post_id" = 5
	order by "date" DESC;


--Posts from event
Select "author_id", "title", "body", "date", "upvotes", "downvotes", 
TYPE, "event_id", "group_id" 
	from "post" where "event_id" = 1;

--Posts from group
Select "author_id", "title", "body", "date", "upvotes", "downvotes", 
TYPE, "event_id", "group_id" 
	from "post" where "group_id" = 1;


	
-- Select all regular users with starting name like...
Select "name" , "user"."user_id" , "regular_user"."regular_user_id" from
 "user" 
	INNER JOIN "regular_user" on "regular_user"."user_id" = 
"user"."user_id"  
	where "user"."name" LIKE 'A%';

-- Select Reports that have no answer
Select "reporter_id", "approval", "reason", "reported_user_id", 
"reported_event_id", "reported_post_id", "reported_comment_id", 
"reported_group_id"
	from "report" where "approval" IS NULL;


--Select friends
Select "friend_id2"
	from "friend" where (TYPE = 'accepted' and "friend_id1" = 2);


--Select pending requests (the user that hasn't answered)
Select "friend_id2"
	from "friend" where (TYPE = 'pending' and "friend_id1" = 2);
	

--Files path from Posts

Select "file_path"
	from "file" INNER JOIN "post" on "post"."post_id" = "file"."post_id" 
where "post"."post_id" = 7 order by "date" DESC;

--Event informations of events I am interested on
Select "event"."event_id", "organization_id", "name", "location", 
"date", "information"
	FROM "event" INNER JOIN "user_interested_in_event" 
	on "event"."event_id" = "user_interested_in_event"."event_id"
	Where "user_interested_in_event"."user_id" = 2;
	
--Select group infomation of groups I belong
Select "group"."group_id" , "name", "information", TYPE
	from "user_in_group" INNER JOIN "group"
	on "user_in_group"."group_id" = "group"."group_id"
	where "user_id" = 2;

--Posts from groups I belong, users I am friends with and events I am 
interested on (Feed)
Select * from (
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "event_id", "post"."group_id" 
		from "post" INNER JOIN "user_in_group" on "post"."group_id" = 
"user_in_group"."group_id" 
		where "user_in_group"."user_id" = 2
	UNION
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "event_id", "post"."group_id" 
		from "post" INNER JOIN "friend" on "friend"."friend_id2" = 
"post"."author_id" 
		WHERE "friend".TYPE = 'accepted' AND "friend"."friend_id1" = 2
	UNION
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "post"."event_id", "post"."group_id" 
		from "post" INNER JOIN "user_interested_in_event" 
		on "post"."event_id" = "user_interested_in_event"."event_id"
		WHERE "user_interested_in_event"."user_id" = 2
) as posts
	NATURAL JOIN

(Select "post_id",count("post_id") from "comment" GROUP BY "post_id") as
 "comments" ;
	


-- Select all regular users and post with starting name ou title ou body
 is like something...
Select * from (
				(Select "name" , "user"."user_id" , "regular_user"."regular_user_id"
 from "user" 
				INNER JOIN "regular_user" on "regular_user"."user_id" = 
"user"."user_id"  
				where "user"."name" LIKE 'A%')
				 as "t1"
				JOIN
				(Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "post"."event_id", "post"."group_id" from
					"post" where "post"."body" LIKE '%para%' or "post"."title" LIKE 
'%para%'
				) as "t2"
	);
	
	
              </div>
              <div class="other-info">
              <div class="timestamp">17:55:34</div>
              </div>
          </div>
      </li><li class="list-item" tabindex="0" data-key="17:55:25">
          <div class="entry ">
              <div class="query">
                  <span id="query_source_icon" class="query-history-icon sql-icon-lg fa fa-play" role="img"></span>
                  
-- my info
Select "user_id", "name" from "user" where "email" = 'jokinho@feup.pt';


-- if is admin
Select "admin_id" from "admin" where "user_id" = 24;

-- if is regular_user
Select "regular_user_id", "personal_info" from "regular_user" where 
"user_id" = 4;

--if is a student
Select "student_id" from "student" where "regular_user_id" = 5;

-- if is a teacher
Select "teacher_id" from "teacher" where "regular_user_id" = 3;

-- if is an organization
Select "organization_id" from "organization" where "regular_user_id" = 
4;


-- Select user from a group
Select "user_id" from "user_in_group" where "group_id" = 1;

--events of organization
Select "name", "location", "date", "information" from "event" where 
"organization_id" = 1;


--Posts posted by me
Select "title", "body", "date", "upvotes", "downvotes", TYPE, 
"event_id", "group_id" 
	from "post" where "author_id" = 2;


--Notification
Select "origin_user_id", "description", "link", "date" from 
"notification"
	INNER JOIN "notified_user" on "notification"."notification_id" 
="notified_user"."notification_id" 
	where "user_notified" = 5;


--Message by chat
Select "sender_id", "body", "date"
	from "message" where "chat_id" = 2
	order by "date" DESC;


--Comments
 Select "comment_id", "user_id", "comment_to_id", "body", "date", 
"upvotes", "downvotes"
	from "comment" where "post_id" = 5
	order by "date" DESC;


--Posts from event
Select "author_id", "title", "body", "date", "upvotes", "downvotes", 
TYPE, "event_id", "group_id" 
	from "post" where "event_id" = 1;

--Posts from group
Select "author_id", "title", "body", "date", "upvotes", "downvotes", 
TYPE, "event_id", "group_id" 
	from "post" where "group_id" = 1;


	
-- Select all regular users with starting name like...
Select "name" , "user"."user_id" , "regular_user"."regular_user_id" from
 "user" 
	INNER JOIN "regular_user" on "regular_user"."user_id" = 
"user"."user_id"  
	where "user"."name" LIKE 'A%';

-- Select Reports that have no answer
Select "reporter_id", "approval", "reason", "reported_user_id", 
"reported_event_id", "reported_post_id", "reported_comment_id", 
"reported_group_id"
	from "report" where "approval" IS NULL;


--Select friends
Select "friend_id2"
	from "friend" where (TYPE = 'accepted' and "friend_id1" = 2);


--Select pending requests (the user that hasn't answered)
Select "friend_id2"
	from "friend" where (TYPE = 'pending' and "friend_id1" = 2);
	

--Files path from Posts

Select "file_path"
	from "file" INNER JOIN "post" on "post"."post_id" = "file"."post_id" 
where "post"."post_id" = 7 order by "date" DESC;

--Event informations of events I am interested on
Select "event"."event_id", "organization_id", "name", "location", 
"date", "information"
	FROM "event" INNER JOIN "user_interested_in_event" 
	on "event"."event_id" = "user_interested_in_event"."event_id"
	Where "user_interested_in_event"."user_id" = 2;
	
--Select group infomation of groups I belong
Select "group"."group_id" , "name", "information", TYPE
	from "user_in_group" INNER JOIN "group"
	on "user_in_group"."group_id" = "group"."group_id"
	where "user_id" = 2;

--Posts from groups I belong, users I am friends with and events I am 
interested on (Feed)
Select * from (
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "event_id", "post"."group_id" 
		from "post" INNER JOIN "user_in_group" on "post"."group_id" = 
"user_in_group"."group_id" 
		where "user_in_group"."user_id" = 2
	UNION
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "event_id", "post"."group_id" 
		from "post" INNER JOIN "friend" on "friend"."friend_id2" = 
"post"."author_id" 
		WHERE "friend".TYPE = 'accepted' AND "friend"."friend_id1" = 2
	UNION
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "post"."event_id", "post"."group_id" 
		from "post" INNER JOIN "user_interested_in_event" 
		on "post"."event_id" = "user_interested_in_event"."event_id"
		WHERE "user_interested_in_event"."user_id" = 2
) as posts
	NATURAL JOIN

(Select "post_id",count("post_id") from "comment" GROUP BY "post_id") as
 "comments" ;
	


-- Select all regular users and post with starting name ou title ou body
 is like something...
Select * from (
				(Select "name" , "user"."user_id" , "regular_user"."regular_user_id"
 from "user" 
				INNER JOIN "regular_user" on "regular_user"."user_id" = 
"user"."user_id"  
				where "user"."name" LIKE 'A%')
				 as "t1"
			NATURAL JOIN
				(Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "post"."event_id", "post"."group_id" from
					"post" where "post"."body" LIKE '%para%' or "post"."title" LIKE 
'%para%'
				) as "t2"
	);
	
	
              </div>
              <div class="other-info">
              <div class="timestamp">17:55:25</div>
              </div>
          </div>
      </li><li class="list-item" tabindex="0" data-key="17:55:20">
          <div class="entry ">
              <div class="query">
                  <span id="query_source_icon" class="query-history-icon sql-icon-lg fa fa-play" role="img"></span>
                  
-- my info
Select "user_id", "name" from "user" where "email" = 'jokinho@feup.pt';


-- if is admin
Select "admin_id" from "admin" where "user_id" = 24;

-- if is regular_user
Select "regular_user_id", "personal_info" from "regular_user" where 
"user_id" = 4;

--if is a student
Select "student_id" from "student" where "regular_user_id" = 5;

-- if is a teacher
Select "teacher_id" from "teacher" where "regular_user_id" = 3;

-- if is an organization
Select "organization_id" from "organization" where "regular_user_id" = 
4;


-- Select user from a group
Select "user_id" from "user_in_group" where "group_id" = 1;

--events of organization
Select "name", "location", "date", "information" from "event" where 
"organization_id" = 1;


--Posts posted by me
Select "title", "body", "date", "upvotes", "downvotes", TYPE, 
"event_id", "group_id" 
	from "post" where "author_id" = 2;


--Notification
Select "origin_user_id", "description", "link", "date" from 
"notification"
	INNER JOIN "notified_user" on "notification"."notification_id" 
="notified_user"."notification_id" 
	where "user_notified" = 5;


--Message by chat
Select "sender_id", "body", "date"
	from "message" where "chat_id" = 2
	order by "date" DESC;


--Comments
 Select "comment_id", "user_id", "comment_to_id", "body", "date", 
"upvotes", "downvotes"
	from "comment" where "post_id" = 5
	order by "date" DESC;


--Posts from event
Select "author_id", "title", "body", "date", "upvotes", "downvotes", 
TYPE, "event_id", "group_id" 
	from "post" where "event_id" = 1;

--Posts from group
Select "author_id", "title", "body", "date", "upvotes", "downvotes", 
TYPE, "event_id", "group_id" 
	from "post" where "group_id" = 1;


	
-- Select all regular users with starting name like...
Select "name" , "user"."user_id" , "regular_user"."regular_user_id" from
 "user" 
	INNER JOIN "regular_user" on "regular_user"."user_id" = 
"user"."user_id"  
	where "user"."name" LIKE 'A%';

-- Select Reports that have no answer
Select "reporter_id", "approval", "reason", "reported_user_id", 
"reported_event_id", "reported_post_id", "reported_comment_id", 
"reported_group_id"
	from "report" where "approval" IS NULL;


--Select friends
Select "friend_id2"
	from "friend" where (TYPE = 'accepted' and "friend_id1" = 2);


--Select pending requests (the user that hasn't answered)
Select "friend_id2"
	from "friend" where (TYPE = 'pending' and "friend_id1" = 2);
	

--Files path from Posts

Select "file_path"
	from "file" INNER JOIN "post" on "post"."post_id" = "file"."post_id" 
where "post"."post_id" = 7 order by "date" DESC;

--Event informations of events I am interested on
Select "event"."event_id", "organization_id", "name", "location", 
"date", "information"
	FROM "event" INNER JOIN "user_interested_in_event" 
	on "event"."event_id" = "user_interested_in_event"."event_id"
	Where "user_interested_in_event"."user_id" = 2;
	
--Select group infomation of groups I belong
Select "group"."group_id" , "name", "information", TYPE
	from "user_in_group" INNER JOIN "group"
	on "user_in_group"."group_id" = "group"."group_id"
	where "user_id" = 2;

--Posts from groups I belong, users I am friends with and events I am 
interested on (Feed)
Select * from (
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "event_id", "post"."group_id" 
		from "post" INNER JOIN "user_in_group" on "post"."group_id" = 
"user_in_group"."group_id" 
		where "user_in_group"."user_id" = 2
	UNION
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "event_id", "post"."group_id" 
		from "post" INNER JOIN "friend" on "friend"."friend_id2" = 
"post"."author_id" 
		WHERE "friend".TYPE = 'accepted' AND "friend"."friend_id1" = 2
	UNION
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "post"."event_id", "post"."group_id" 
		from "post" INNER JOIN "user_interested_in_event" 
		on "post"."event_id" = "user_interested_in_event"."event_id"
		WHERE "user_interested_in_event"."user_id" = 2
) as posts
	NATURAL JOIN

(Select "post_id",count("post_id") from "comment" GROUP BY "post_id") as
 "comments" ;
	


-- Select all regular users and post with starting name ou title ou body
 is like something...
Select * from (
				(Select "name" , "user"."user_id" , "regular_user"."regular_user_id"
 from "user" 
				INNER JOIN "regular_user" on "regular_user"."user_id" = 
"user"."user_id"  
				where "user"."name" LIKE 'A%')
				 as "t1"
			NATURAL JOIN
				(Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "post"."event_id", "post"."group_id" from
					"post" where "post"."body" LIKE '%para%' or "post"."title" LIKE 
'%para%'
				) as "t2"
	);
	
	Select "name" , "user"."user_id" , "regular_user"."regular_user_id" 
from "user" 
				INNER JOIN "regular_user" on "regular_user"."user_id" = 
"user"."user_id"  
				where "user"."name" LIKE 'A%'
              </div>
              <div class="other-info">
              <div class="timestamp">17:55:20</div>
              </div>
          </div>
      </li><li class="list-item" tabindex="0" data-key="17:54:07">
          <div class="entry ">
              <div class="query">
                  <span id="query_source_icon" class="query-history-icon sql-icon-lg fa fa-play" role="img"></span>
                  
-- my info
Select "user_id", "name" from "user" where "email" = 'jokinho@feup.pt';


-- if is admin
Select "admin_id" from "admin" where "user_id" = 24;

-- if is regular_user
Select "regular_user_id", "personal_info" from "regular_user" where 
"user_id" = 4;

--if is a student
Select "student_id" from "student" where "regular_user_id" = 5;

-- if is a teacher
Select "teacher_id" from "teacher" where "regular_user_id" = 3;

-- if is an organization
Select "organization_id" from "organization" where "regular_user_id" = 
4;


-- Select user from a group
Select "user_id" from "user_in_group" where "group_id" = 1;

--events of organization
Select "name", "location", "date", "information" from "event" where 
"organization_id" = 1;


--Posts posted by me
Select "title", "body", "date", "upvotes", "downvotes", TYPE, 
"event_id", "group_id" 
	from "post" where "author_id" = 2;


--Notification
Select "origin_user_id", "description", "link", "date" from 
"notification"
	INNER JOIN "notified_user" on "notification"."notification_id" 
="notified_user"."notification_id" 
	where "user_notified" = 5;


--Message by chat
Select "sender_id", "body", "date"
	from "message" where "chat_id" = 2
	order by "date" DESC;


--Comments
 Select "comment_id", "user_id", "comment_to_id", "body", "date", 
"upvotes", "downvotes"
	from "comment" where "post_id" = 5
	order by "date" DESC;


--Posts from event
Select "author_id", "title", "body", "date", "upvotes", "downvotes", 
TYPE, "event_id", "group_id" 
	from "post" where "event_id" = 1;

--Posts from group
Select "author_id", "title", "body", "date", "upvotes", "downvotes", 
TYPE, "event_id", "group_id" 
	from "post" where "group_id" = 1;


	
-- Select all regular users with starting name like...
Select "name" , "user"."user_id" , "regular_user"."regular_user_id" from
 "user" 
	INNER JOIN "regular_user" on "regular_user"."user_id" = 
"user"."user_id"  
	where "user"."name" LIKE 'A%';

-- Select Reports that have no answer
Select "reporter_id", "approval", "reason", "reported_user_id", 
"reported_event_id", "reported_post_id", "reported_comment_id", 
"reported_group_id"
	from "report" where "approval" IS NULL;


--Select friends
Select "friend_id2"
	from "friend" where (TYPE = 'accepted' and "friend_id1" = 2);


--Select pending requests (the user that hasn't answered)
Select "friend_id2"
	from "friend" where (TYPE = 'pending' and "friend_id1" = 2);
	

--Files path from Posts

Select "file_path"
	from "file" INNER JOIN "post" on "post"."post_id" = "file"."post_id" 
where "post"."post_id" = 7 order by "date" DESC;

--Event informations of events I am interested on
Select "event"."event_id", "organization_id", "name", "location", 
"date", "information"
	FROM "event" INNER JOIN "user_interested_in_event" 
	on "event"."event_id" = "user_interested_in_event"."event_id"
	Where "user_interested_in_event"."user_id" = 2;
	
--Select group infomation of groups I belong
Select "group"."group_id" , "name", "information", TYPE
	from "user_in_group" INNER JOIN "group"
	on "user_in_group"."group_id" = "group"."group_id"
	where "user_id" = 2;

--Posts from groups I belong, users I am friends with and events I am 
interested on (Feed)
Select * from (
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "event_id", "post"."group_id" 
		from "post" INNER JOIN "user_in_group" on "post"."group_id" = 
"user_in_group"."group_id" 
		where "user_in_group"."user_id" = 2
	UNION
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "event_id", "post"."group_id" 
		from "post" INNER JOIN "friend" on "friend"."friend_id2" = 
"post"."author_id" 
		WHERE "friend".TYPE = 'accepted' AND "friend"."friend_id1" = 2
	UNION
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "post"."event_id", "post"."group_id" 
		from "post" INNER JOIN "user_interested_in_event" 
		on "post"."event_id" = "user_interested_in_event"."event_id"
		WHERE "user_interested_in_event"."user_id" = 2
) as posts
	NATURAL JOIN

(Select "post_id",count("post_id") from "comment" GROUP BY "post_id") as
 "comments" ;
	


-- Select all regular users and post with starting name ou title ou body
 is like something...
Select * from (
				(Select "name" , "user"."user_id" , "regular_user"."regular_user_id"
 from "user" 
				INNER JOIN "regular_user" on "regular_user"."user_id" = 
"user"."user_id"  
				where "user"."name" LIKE 'A%')
				 as "t1"
			NATURAL JOIN
				(Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "post"."event_id", "post"."group_id" from
					"post" where "post"."body" LIKE '%para%' or "post"."title" LIKE 
'%para%'
				) as "t2"
	);
              </div>
              <div class="other-info">
              <div class="timestamp">17:54:07</div>
              </div>
          </div>
      </li><li class="list-item" tabindex="0" data-key="17:53:30">
          <div class="entry error">
              <div class="query">
                  <span id="query_source_icon" class="query-history-icon sql-icon-lg fa fa-play" role="img"></span>
                  
-- my info
Select "user_id", "name" from "user" where "email" = 'jokinho@feup.pt';


-- if is admin
Select "admin_id" from "admin" where "user_id" = 24;

-- if is regular_user
Select "regular_user_id", "personal_info" from "regular_user" where 
"user_id" = 4;

--if is a student
Select "student_id" from "student" where "regular_user_id" = 5;

-- if is a teacher
Select "teacher_id" from "teacher" where "regular_user_id" = 3;

-- if is an organization
Select "organization_id" from "organization" where "regular_user_id" = 
4;


-- Select user from a group
Select "user_id" from "user_in_group" where "group_id" = 1;

--events of organization
Select "name", "location", "date", "information" from "event" where 
"organization_id" = 1;


--Posts posted by me
Select "title", "body", "date", "upvotes", "downvotes", TYPE, 
"event_id", "group_id" 
	from "post" where "author_id" = 2;


--Notification
Select "origin_user_id", "description", "link", "date" from 
"notification"
	INNER JOIN "notified_user" on "notification"."notification_id" 
="notified_user"."notification_id" 
	where "user_notified" = 5;


--Message by chat
Select "sender_id", "body", "date"
	from "message" where "chat_id" = 2
	order by "date" DESC;


--Comments
 Select "comment_id", "user_id", "comment_to_id", "body", "date", 
"upvotes", "downvotes"
	from "comment" where "post_id" = 5
	order by "date" DESC;


--Posts from event
Select "author_id", "title", "body", "date", "upvotes", "downvotes", 
TYPE, "event_id", "group_id" 
	from "post" where "event_id" = 1;

--Posts from group
Select "author_id", "title", "body", "date", "upvotes", "downvotes", 
TYPE, "event_id", "group_id" 
	from "post" where "group_id" = 1;


	
-- Select all regular users with starting name like...
Select "name" , "user"."user_id" , "regular_user"."regular_user_id" from
 "user" 
	INNER JOIN "regular_user" on "regular_user"."user_id" = 
"user"."user_id"  
	where "user"."name" LIKE 'A%';

-- Select Reports that have no answer
Select "reporter_id", "approval", "reason", "reported_user_id", 
"reported_event_id", "reported_post_id", "reported_comment_id", 
"reported_group_id"
	from "report" where "approval" IS NULL;


--Select friends
Select "friend_id2"
	from "friend" where (TYPE = 'accepted' and "friend_id1" = 2);


--Select pending requests (the user that hasn't answered)
Select "friend_id2"
	from "friend" where (TYPE = 'pending' and "friend_id1" = 2);
	

--Files path from Posts

Select "file_path"
	from "file" INNER JOIN "post" on "post"."post_id" = "file"."post_id" 
where "post"."post_id" = 7 order by "date" DESC;

--Event informations of events I am interested on
Select "event"."event_id", "organization_id", "name", "location", 
"date", "information"
	FROM "event" INNER JOIN "user_interested_in_event" 
	on "event"."event_id" = "user_interested_in_event"."event_id"
	Where "user_interested_in_event"."user_id" = 2;
	
--Select group infomation of groups I belong
Select "group"."group_id" , "name", "information", TYPE
	from "user_in_group" INNER JOIN "group"
	on "user_in_group"."group_id" = "group"."group_id"
	where "user_id" = 2;

--Posts from groups I belong, users I am friends with and events I am 
interested on (Feed)
Select * from (
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "event_id", "post"."group_id" 
		from "post" INNER JOIN "user_in_group" on "post"."group_id" = 
"user_in_group"."group_id" 
		where "user_in_group"."user_id" = 2
	UNION
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "event_id", "post"."group_id" 
		from "post" INNER JOIN "friend" on "friend"."friend_id2" = 
"post"."author_id" 
		WHERE "friend".TYPE = 'accepted' AND "friend"."friend_id1" = 2
	UNION
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "post"."event_id", "post"."group_id" 
		from "post" INNER JOIN "user_interested_in_event" 
		on "post"."event_id" = "user_interested_in_event"."event_id"
		WHERE "user_interested_in_event"."user_id" = 2
) as posts
	NATURAL JOIN

(Select "post_id",count("post_id") from "comment" GROUP BY "post_id") as
 "comments" ;
	


-- Select all regular users and post with starting name ou title ou body
 is like something...
Select * from (
				(Select "name" , "user"."user_id" , "regular_user"."regular_user_id"
 from "user" 
				INNER JOIN "regular_user" on "regular_user"."user_id" = 
"user"."user_id"  
				where "user"."name" LIKE 'A%')
				 as "t1"
			UNION
				(Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "post"."event_id", "post"."group_id" from
					"post" where "post"."body" LIKE '%para%' or "post"."title" LIKE 
'%para%'
				) as "t2");
              </div>
              <div class="other-info">
              <div class="timestamp">17:53:30</div>
              </div>
          </div>
      </li><li class="list-item" tabindex="0" data-key="17:53:16">
          <div class="entry error">
              <div class="query">
                  <span id="query_source_icon" class="query-history-icon sql-icon-lg fa fa-play" role="img"></span>
                  
-- my info
Select "user_id", "name" from "user" where "email" = 'jokinho@feup.pt';


-- if is admin
Select "admin_id" from "admin" where "user_id" = 24;

-- if is regular_user
Select "regular_user_id", "personal_info" from "regular_user" where 
"user_id" = 4;

--if is a student
Select "student_id" from "student" where "regular_user_id" = 5;

-- if is a teacher
Select "teacher_id" from "teacher" where "regular_user_id" = 3;

-- if is an organization
Select "organization_id" from "organization" where "regular_user_id" = 
4;


-- Select user from a group
Select "user_id" from "user_in_group" where "group_id" = 1;

--events of organization
Select "name", "location", "date", "information" from "event" where 
"organization_id" = 1;


--Posts posted by me
Select "title", "body", "date", "upvotes", "downvotes", TYPE, 
"event_id", "group_id" 
	from "post" where "author_id" = 2;


--Notification
Select "origin_user_id", "description", "link", "date" from 
"notification"
	INNER JOIN "notified_user" on "notification"."notification_id" 
="notified_user"."notification_id" 
	where "user_notified" = 5;


--Message by chat
Select "sender_id", "body", "date"
	from "message" where "chat_id" = 2
	order by "date" DESC;


--Comments
 Select "comment_id", "user_id", "comment_to_id", "body", "date", 
"upvotes", "downvotes"
	from "comment" where "post_id" = 5
	order by "date" DESC;


--Posts from event
Select "author_id", "title", "body", "date", "upvotes", "downvotes", 
TYPE, "event_id", "group_id" 
	from "post" where "event_id" = 1;

--Posts from group
Select "author_id", "title", "body", "date", "upvotes", "downvotes", 
TYPE, "event_id", "group_id" 
	from "post" where "group_id" = 1;


	
-- Select all regular users with starting name like...
Select "name" , "user"."user_id" , "regular_user"."regular_user_id" from
 "user" 
	INNER JOIN "regular_user" on "regular_user"."user_id" = 
"user"."user_id"  
	where "user"."name" LIKE 'A%';

-- Select Reports that have no answer
Select "reporter_id", "approval", "reason", "reported_user_id", 
"reported_event_id", "reported_post_id", "reported_comment_id", 
"reported_group_id"
	from "report" where "approval" IS NULL;


--Select friends
Select "friend_id2"
	from "friend" where (TYPE = 'accepted' and "friend_id1" = 2);


--Select pending requests (the user that hasn't answered)
Select "friend_id2"
	from "friend" where (TYPE = 'pending' and "friend_id1" = 2);
	

--Files path from Posts

Select "file_path"
	from "file" INNER JOIN "post" on "post"."post_id" = "file"."post_id" 
where "post"."post_id" = 7 order by "date" DESC;

--Event informations of events I am interested on
Select "event"."event_id", "organization_id", "name", "location", 
"date", "information"
	FROM "event" INNER JOIN "user_interested_in_event" 
	on "event"."event_id" = "user_interested_in_event"."event_id"
	Where "user_interested_in_event"."user_id" = 2;
	
--Select group infomation of groups I belong
Select "group"."group_id" , "name", "information", TYPE
	from "user_in_group" INNER JOIN "group"
	on "user_in_group"."group_id" = "group"."group_id"
	where "user_id" = 2;

--Posts from groups I belong, users I am friends with and events I am 
interested on (Feed)
Select * from (
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "event_id", "post"."group_id" 
		from "post" INNER JOIN "user_in_group" on "post"."group_id" = 
"user_in_group"."group_id" 
		where "user_in_group"."user_id" = 2
	UNION
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "event_id", "post"."group_id" 
		from "post" INNER JOIN "friend" on "friend"."friend_id2" = 
"post"."author_id" 
		WHERE "friend".TYPE = 'accepted' AND "friend"."friend_id1" = 2
	UNION
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "post"."event_id", "post"."group_id" 
		from "post" INNER JOIN "user_interested_in_event" 
		on "post"."event_id" = "user_interested_in_event"."event_id"
		WHERE "user_interested_in_event"."user_id" = 2
) as posts
	NATURAL JOIN

(Select "post_id",count("post_id") from "comment" GROUP BY "post_id") as
 "comments" ;
	


-- Select all regular users and post with starting name ou title ou body
 is like something...
Select * from (
				Select "name" , "user"."user_id" , "regular_user"."regular_user_id" 
from "user" 
				INNER JOIN "regular_user" on "regular_user"."user_id" = 
"user"."user_id"  
				where "user"."name" LIKE 'A%'
				 as "t1"
			UNION
				Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "post"."event_id", "post"."group_id" from
					"post" where "post"."body" LIKE '%para%' or "post"."title" LIKE 
'%para%'
				) as "t2";
              </div>
              <div class="other-info">
              <div class="timestamp">17:53:16</div>
              </div>
          </div>
      </li><li class="list-item" tabindex="0" data-key="17:52:59">
          <div class="entry error">
              <div class="query">
                  <span id="query_source_icon" class="query-history-icon sql-icon-lg fa fa-play" role="img"></span>
                  
-- my info
Select "user_id", "name" from "user" where "email" = 'jokinho@feup.pt';


-- if is admin
Select "admin_id" from "admin" where "user_id" = 24;

-- if is regular_user
Select "regular_user_id", "personal_info" from "regular_user" where 
"user_id" = 4;

--if is a student
Select "student_id" from "student" where "regular_user_id" = 5;

-- if is a teacher
Select "teacher_id" from "teacher" where "regular_user_id" = 3;

-- if is an organization
Select "organization_id" from "organization" where "regular_user_id" = 
4;


-- Select user from a group
Select "user_id" from "user_in_group" where "group_id" = 1;

--events of organization
Select "name", "location", "date", "information" from "event" where 
"organization_id" = 1;


--Posts posted by me
Select "title", "body", "date", "upvotes", "downvotes", TYPE, 
"event_id", "group_id" 
	from "post" where "author_id" = 2;


--Notification
Select "origin_user_id", "description", "link", "date" from 
"notification"
	INNER JOIN "notified_user" on "notification"."notification_id" 
="notified_user"."notification_id" 
	where "user_notified" = 5;


--Message by chat
Select "sender_id", "body", "date"
	from "message" where "chat_id" = 2
	order by "date" DESC;


--Comments
 Select "comment_id", "user_id", "comment_to_id", "body", "date", 
"upvotes", "downvotes"
	from "comment" where "post_id" = 5
	order by "date" DESC;


--Posts from event
Select "author_id", "title", "body", "date", "upvotes", "downvotes", 
TYPE, "event_id", "group_id" 
	from "post" where "event_id" = 1;

--Posts from group
Select "author_id", "title", "body", "date", "upvotes", "downvotes", 
TYPE, "event_id", "group_id" 
	from "post" where "group_id" = 1;


	
-- Select all regular users with starting name like...
Select "name" , "user"."user_id" , "regular_user"."regular_user_id" from
 "user" 
	INNER JOIN "regular_user" on "regular_user"."user_id" = 
"user"."user_id"  
	where "user"."name" LIKE 'A%';

-- Select Reports that have no answer
Select "reporter_id", "approval", "reason", "reported_user_id", 
"reported_event_id", "reported_post_id", "reported_comment_id", 
"reported_group_id"
	from "report" where "approval" IS NULL;


--Select friends
Select "friend_id2"
	from "friend" where (TYPE = 'accepted' and "friend_id1" = 2);


--Select pending requests (the user that hasn't answered)
Select "friend_id2"
	from "friend" where (TYPE = 'pending' and "friend_id1" = 2);
	

--Files path from Posts

Select "file_path"
	from "file" INNER JOIN "post" on "post"."post_id" = "file"."post_id" 
where "post"."post_id" = 7 order by "date" DESC;

--Event informations of events I am interested on
Select "event"."event_id", "organization_id", "name", "location", 
"date", "information"
	FROM "event" INNER JOIN "user_interested_in_event" 
	on "event"."event_id" = "user_interested_in_event"."event_id"
	Where "user_interested_in_event"."user_id" = 2;
	
--Select group infomation of groups I belong
Select "group"."group_id" , "name", "information", TYPE
	from "user_in_group" INNER JOIN "group"
	on "user_in_group"."group_id" = "group"."group_id"
	where "user_id" = 2;

--Posts from groups I belong, users I am friends with and events I am 
interested on (Feed)
Select * from (
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "event_id", "post"."group_id" 
		from "post" INNER JOIN "user_in_group" on "post"."group_id" = 
"user_in_group"."group_id" 
		where "user_in_group"."user_id" = 2
	UNION
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "event_id", "post"."group_id" 
		from "post" INNER JOIN "friend" on "friend"."friend_id2" = 
"post"."author_id" 
		WHERE "friend".TYPE = 'accepted' AND "friend"."friend_id1" = 2
	UNION
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "post"."event_id", "post"."group_id" 
		from "post" INNER JOIN "user_interested_in_event" 
		on "post"."event_id" = "user_interested_in_event"."event_id"
		WHERE "user_interested_in_event"."user_id" = 2
) as posts
	NATURAL JOIN

(Select "post_id",count("post_id") from "comment" GROUP BY "post_id") as
 "comments" ;
	


-- Select all regular users and post with starting name ou title ou body
 is like something...
Select * from (
				Select "name" , "user"."user_id" , "regular_user"."regular_user_id" 
from "user" 
				INNER JOIN "regular_user" on "regular_user"."user_id" = 
"user"."user_id"  
				where "user"."name" LIKE 'A%'
				) as "t1"
			UNION
				(Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "post"."event_id", "post"."group_id" from
					"post" where "post"."body" LIKE '%para%' or "post"."title" LIKE 
'%para%'
				) as "t2";
              </div>
              <div class="other-info">
              <div class="timestamp">17:52:59</div>
              </div>
          </div>
      </li><li class="list-item" tabindex="0" data-key="17:52:19">
          <div class="entry error">
              <div class="query">
                  <span id="query_source_icon" class="query-history-icon sql-icon-lg fa fa-play" role="img"></span>
                  
-- my info
Select "user_id", "name" from "user" where "email" = 'jokinho@feup.pt';


-- if is admin
Select "admin_id" from "admin" where "user_id" = 24;

-- if is regular_user
Select "regular_user_id", "personal_info" from "regular_user" where 
"user_id" = 4;

--if is a student
Select "student_id" from "student" where "regular_user_id" = 5;

-- if is a teacher
Select "teacher_id" from "teacher" where "regular_user_id" = 3;

-- if is an organization
Select "organization_id" from "organization" where "regular_user_id" = 
4;


-- Select user from a group
Select "user_id" from "user_in_group" where "group_id" = 1;

--events of organization
Select "name", "location", "date", "information" from "event" where 
"organization_id" = 1;


--Posts posted by me
Select "title", "body", "date", "upvotes", "downvotes", TYPE, 
"event_id", "group_id" 
	from "post" where "author_id" = 2;


--Notification
Select "origin_user_id", "description", "link", "date" from 
"notification"
	INNER JOIN "notified_user" on "notification"."notification_id" 
="notified_user"."notification_id" 
	where "user_notified" = 5;


--Message by chat
Select "sender_id", "body", "date"
	from "message" where "chat_id" = 2
	order by "date" DESC;


--Comments
 Select "comment_id", "user_id", "comment_to_id", "body", "date", 
"upvotes", "downvotes"
	from "comment" where "post_id" = 5
	order by "date" DESC;


--Posts from event
Select "author_id", "title", "body", "date", "upvotes", "downvotes", 
TYPE, "event_id", "group_id" 
	from "post" where "event_id" = 1;

--Posts from group
Select "author_id", "title", "body", "date", "upvotes", "downvotes", 
TYPE, "event_id", "group_id" 
	from "post" where "group_id" = 1;


	
-- Select all regular users with starting name like...
Select "name" , "user"."user_id" , "regular_user"."regular_user_id" from
 "user" 
	INNER JOIN "regular_user" on "regular_user"."user_id" = 
"user"."user_id"  
	where "user"."name" LIKE 'A%';

-- Select Reports that have no answer
Select "reporter_id", "approval", "reason", "reported_user_id", 
"reported_event_id", "reported_post_id", "reported_comment_id", 
"reported_group_id"
	from "report" where "approval" IS NULL;


--Select friends
Select "friend_id2"
	from "friend" where (TYPE = 'accepted' and "friend_id1" = 2);


--Select pending requests (the user that hasn't answered)
Select "friend_id2"
	from "friend" where (TYPE = 'pending' and "friend_id1" = 2);
	

--Files path from Posts

Select "file_path"
	from "file" INNER JOIN "post" on "post"."post_id" = "file"."post_id" 
where "post"."post_id" = 7 order by "date" DESC;

--Event informations of events I am interested on
Select "event"."event_id", "organization_id", "name", "location", 
"date", "information"
	FROM "event" INNER JOIN "user_interested_in_event" 
	on "event"."event_id" = "user_interested_in_event"."event_id"
	Where "user_interested_in_event"."user_id" = 2;
	
--Select group infomation of groups I belong
Select "group"."group_id" , "name", "information", TYPE
	from "user_in_group" INNER JOIN "group"
	on "user_in_group"."group_id" = "group"."group_id"
	where "user_id" = 2;

--Posts from groups I belong, users I am friends with and events I am 
interested on (Feed)
Select * from (
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "event_id", "post"."group_id" 
		from "post" INNER JOIN "user_in_group" on "post"."group_id" = 
"user_in_group"."group_id" 
		where "user_in_group"."user_id" = 2
	UNION
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "event_id", "post"."group_id" 
		from "post" INNER JOIN "friend" on "friend"."friend_id2" = 
"post"."author_id" 
		WHERE "friend".TYPE = 'accepted' AND "friend"."friend_id1" = 2
	UNION
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "post"."event_id", "post"."group_id" 
		from "post" INNER JOIN "user_interested_in_event" 
		on "post"."event_id" = "user_interested_in_event"."event_id"
		WHERE "user_interested_in_event"."user_id" = 2
) as posts
	NATURAL JOIN

(Select "post_id",count("post_id") from "comment" GROUP BY "post_id") as
 "comments" ;
	


-- Select all regular users and post with starting name ou title ou body
 is like something...
Select * from (
				Select "name" , "user"."user_id" , "regular_user"."regular_user_id" 
from "user" 
				INNER JOIN "regular_user" on "regular_user"."user_id" = 
"user"."user_id"  
				where "user"."name" LIKE 'A%'
	) as "t1"

JOIN
(
Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "post"."event_id", "post"."group_id" from
	"post" where "post"."body" LIKE '%para%' or "post"."title" LIKE 
'%para%'
	) as "t2";
              </div>
              <div class="other-info">
              <div class="timestamp">17:52:19</div>
              </div>
          </div>
      </li><li class="list-item" tabindex="0" data-key="17:52:14">
          <div class="entry error">
              <div class="query">
                  <span id="query_source_icon" class="query-history-icon sql-icon-lg fa fa-play" role="img"></span>
                  
-- my info
Select "user_id", "name" from "user" where "email" = 'jokinho@feup.pt';


-- if is admin
Select "admin_id" from "admin" where "user_id" = 24;

-- if is regular_user
Select "regular_user_id", "personal_info" from "regular_user" where 
"user_id" = 4;

--if is a student
Select "student_id" from "student" where "regular_user_id" = 5;

-- if is a teacher
Select "teacher_id" from "teacher" where "regular_user_id" = 3;

-- if is an organization
Select "organization_id" from "organization" where "regular_user_id" = 
4;


-- Select user from a group
Select "user_id" from "user_in_group" where "group_id" = 1;

--events of organization
Select "name", "location", "date", "information" from "event" where 
"organization_id" = 1;


--Posts posted by me
Select "title", "body", "date", "upvotes", "downvotes", TYPE, 
"event_id", "group_id" 
	from "post" where "author_id" = 2;


--Notification
Select "origin_user_id", "description", "link", "date" from 
"notification"
	INNER JOIN "notified_user" on "notification"."notification_id" 
="notified_user"."notification_id" 
	where "user_notified" = 5;


--Message by chat
Select "sender_id", "body", "date"
	from "message" where "chat_id" = 2
	order by "date" DESC;


--Comments
 Select "comment_id", "user_id", "comment_to_id", "body", "date", 
"upvotes", "downvotes"
	from "comment" where "post_id" = 5
	order by "date" DESC;


--Posts from event
Select "author_id", "title", "body", "date", "upvotes", "downvotes", 
TYPE, "event_id", "group_id" 
	from "post" where "event_id" = 1;

--Posts from group
Select "author_id", "title", "body", "date", "upvotes", "downvotes", 
TYPE, "event_id", "group_id" 
	from "post" where "group_id" = 1;


	
-- Select all regular users with starting name like...
Select "name" , "user"."user_id" , "regular_user"."regular_user_id" from
 "user" 
	INNER JOIN "regular_user" on "regular_user"."user_id" = 
"user"."user_id"  
	where "user"."name" LIKE 'A%';

-- Select Reports that have no answer
Select "reporter_id", "approval", "reason", "reported_user_id", 
"reported_event_id", "reported_post_id", "reported_comment_id", 
"reported_group_id"
	from "report" where "approval" IS NULL;


--Select friends
Select "friend_id2"
	from "friend" where (TYPE = 'accepted' and "friend_id1" = 2);


--Select pending requests (the user that hasn't answered)
Select "friend_id2"
	from "friend" where (TYPE = 'pending' and "friend_id1" = 2);
	

--Files path from Posts

Select "file_path"
	from "file" INNER JOIN "post" on "post"."post_id" = "file"."post_id" 
where "post"."post_id" = 7 order by "date" DESC;

--Event informations of events I am interested on
Select "event"."event_id", "organization_id", "name", "location", 
"date", "information"
	FROM "event" INNER JOIN "user_interested_in_event" 
	on "event"."event_id" = "user_interested_in_event"."event_id"
	Where "user_interested_in_event"."user_id" = 2;
	
--Select group infomation of groups I belong
Select "group"."group_id" , "name", "information", TYPE
	from "user_in_group" INNER JOIN "group"
	on "user_in_group"."group_id" = "group"."group_id"
	where "user_id" = 2;

--Posts from groups I belong, users I am friends with and events I am 
interested on (Feed)
Select * from (
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "event_id", "post"."group_id" 
		from "post" INNER JOIN "user_in_group" on "post"."group_id" = 
"user_in_group"."group_id" 
		where "user_in_group"."user_id" = 2
	UNION
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "event_id", "post"."group_id" 
		from "post" INNER JOIN "friend" on "friend"."friend_id2" = 
"post"."author_id" 
		WHERE "friend".TYPE = 'accepted' AND "friend"."friend_id1" = 2
	UNION
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "post"."event_id", "post"."group_id" 
		from "post" INNER JOIN "user_interested_in_event" 
		on "post"."event_id" = "user_interested_in_event"."event_id"
		WHERE "user_interested_in_event"."user_id" = 2
) as posts
	NATURAL JOIN

(Select "post_id",count("post_id") from "comment" GROUP BY "post_id") as
 "comments" ;
	


-- Select all regular users and post with starting name ou title ou body
 is like something...
Select * from (
				Select "name" , "user"."user_id" , "regular_user"."regular_user_id" 
from "user" 
				INNER JOIN "regular_user" on "regular_user"."user_id" = 
"user"."user_id"  
				where "user"."name" LIKE 'A%'
	) as "t1"

JOIN
(
Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "post"."event_id", "post"."group_id" from
	"post" where "post"."body" LIKE '%para%' or "post"."title" LIKE 
'%para%';
	) as "t2";
              </div>
              <div class="other-info">
              <div class="timestamp">17:52:14</div>
              </div>
          </div>
      </li><li class="list-item" tabindex="0" data-key="18:02:09">
          <div class="entry ">
              <div class="query">
                  <span id="query_source_icon" class="query-history-icon sql-icon-lg fa fa-play" role="img"></span>
                  
-- my info
Select "user_id", "name" from "user" where "email" = 'jokinho@feup.pt';


-- if is admin
Select "admin_id" from "admin" where "user_id" = 24;

-- if is regular_user
Select "regular_user_id", "personal_info" from "regular_user" where 
"user_id" = 4;

--if is a student
Select "student_id" from "student" where "regular_user_id" = 5;

-- if is a teacher
Select "teacher_id" from "teacher" where "regular_user_id" = 3;

-- if is an organization
Select "organization_id" from "organization" where "regular_user_id" = 
4;


-- Select user from a group
Select "user_id" from "user_in_group" where "group_id" = 1;

--events of organization
Select "name", "location", "date", "information" from "event" where 
"organization_id" = 1;


--Posts posted by me
Select "title", "body", "date", "upvotes", "downvotes", TYPE, 
"event_id", "group_id" 
	from "post" where "author_id" = 2;


--Notification
Select "origin_user_id", "description", "link", "date" from 
"notification"
	INNER JOIN "notified_user" on "notification"."notification_id" 
="notified_user"."notification_id" 
	where "user_notified" = 5;


--Message by chat
Select "sender_id", "body", "date"
	from "message" where "chat_id" = 2
	order by "date" DESC;


--Comments
 Select "comment_id", "user_id", "comment_to_id", "body", "date", 
"upvotes", "downvotes"
	from "comment" where "post_id" = 5
	order by "date" DESC;


--Posts from event
Select "author_id", "title", "body", "date", "upvotes", "downvotes", 
TYPE, "event_id", "group_id" 
	from "post" where "event_id" = 1;

--Posts from group
Select "author_id", "title", "body", "date", "upvotes", "downvotes", 
TYPE, "event_id", "group_id" 
	from "post" where "group_id" = 1;


	
-- Select all regular users with starting name like...
Select "name" , "user"."user_id" , "regular_user"."regular_user_id" from
 "user" 
	INNER JOIN "regular_user" on "regular_user"."user_id" = 
"user"."user_id"  
	where "user"."name" LIKE 'A%';

-- Select Reports that have no answer
Select "reporter_id", "approval", "reason", "reported_user_id", 
"reported_event_id", "reported_post_id", "reported_comment_id", 
"reported_group_id"
	from "report" where "approval" IS NULL;


--Select friends
Select "friend_id2"
	from "friend" where (TYPE = 'accepted' and "friend_id1" = 2);


--Select pending requests (the user that hasn't answered)
Select "friend_id2"
	from "friend" where (TYPE = 'pending' and "friend_id1" = 2);
	

--Files path from Posts

Select "file_path"
	from "file" INNER JOIN "post" on "post"."post_id" = "file"."post_id" 
where "post"."post_id" = 7 order by "date" DESC;

--Event informations of events I am interested on
Select "event"."event_id", "organization_id", "name", "location", 
"date", "information"
	FROM "event" INNER JOIN "user_interested_in_event" 
	on "event"."event_id" = "user_interested_in_event"."event_id"
	Where "user_interested_in_event"."user_id" = 2;
	
--Select group infomation of groups I belong
Select "group"."group_id" , "name", "information", TYPE
	from "user_in_group" INNER JOIN "group"
	on "user_in_group"."group_id" = "group"."group_id"
	where "user_id" = 2;

--Posts from groups I belong, users I am friends with and events I am 
interested on (Feed)
Select * from (
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "event_id", "post"."group_id" 
		from "post" INNER JOIN "user_in_group" on "post"."group_id" = 
"user_in_group"."group_id" 
		where "user_in_group"."user_id" = 2
	UNION
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "event_id", "post"."group_id" 
		from "post" INNER JOIN "friend" on "friend"."friend_id2" = 
"post"."author_id" 
		WHERE "friend".TYPE = 'accepted' AND "friend"."friend_id1" = 2
	UNION
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "post"."event_id", "post"."group_id" 
		from "post" INNER JOIN "user_interested_in_event" 
		on "post"."event_id" = "user_interested_in_event"."event_id"
		WHERE "user_interested_in_event"."user_id" = 2
) as posts
	NATURAL JOIN

(Select "post_id",count("post_id") from "comment" GROUP BY "post_id") as
 "comments" ;
	


-- Select all regular users and post with starting name ou title ou body
 is like something...
Select * from 
				(Select "name" , "user"."user_id" , "regular_user"."regular_user_id"
 from "user" 
				INNER JOIN "regular_user" on "regular_user"."user_id" = 
"user"."user_id"  
				where "user"."name" LIKE '%para%%')
				 as "t1"
				FULL OUTER JOIN
				(Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "post"."event_id", "post"."group_id" from
					"post" where "post"."body" LIKE '%para%' or "post"."title" LIKE 
'%para%'
				) as "t2" on "t1"."name" = "body";
	
	
	
              </div>
              <div class="other-info">
              <div class="timestamp">18:02:09</div>
              </div>
          </div>
      </li><li class="list-item" tabindex="0" data-key="17:59:35">
          <div class="entry ">
              <div class="query">
                  <span id="query_source_icon" class="query-history-icon sql-icon-lg fa fa-play" role="img"></span>
                  
-- my info
Select "user_id", "name" from "user" where "email" = 'jokinho@feup.pt';


-- if is admin
Select "admin_id" from "admin" where "user_id" = 24;

-- if is regular_user
Select "regular_user_id", "personal_info" from "regular_user" where 
"user_id" = 4;

--if is a student
Select "student_id" from "student" where "regular_user_id" = 5;

-- if is a teacher
Select "teacher_id" from "teacher" where "regular_user_id" = 3;

-- if is an organization
Select "organization_id" from "organization" where "regular_user_id" = 
4;


-- Select user from a group
Select "user_id" from "user_in_group" where "group_id" = 1;

--events of organization
Select "name", "location", "date", "information" from "event" where 
"organization_id" = 1;


--Posts posted by me
Select "title", "body", "date", "upvotes", "downvotes", TYPE, 
"event_id", "group_id" 
	from "post" where "author_id" = 2;


--Notification
Select "origin_user_id", "description", "link", "date" from 
"notification"
	INNER JOIN "notified_user" on "notification"."notification_id" 
="notified_user"."notification_id" 
	where "user_notified" = 5;


--Message by chat
Select "sender_id", "body", "date"
	from "message" where "chat_id" = 2
	order by "date" DESC;


--Comments
 Select "comment_id", "user_id", "comment_to_id", "body", "date", 
"upvotes", "downvotes"
	from "comment" where "post_id" = 5
	order by "date" DESC;


--Posts from event
Select "author_id", "title", "body", "date", "upvotes", "downvotes", 
TYPE, "event_id", "group_id" 
	from "post" where "event_id" = 1;

--Posts from group
Select "author_id", "title", "body", "date", "upvotes", "downvotes", 
TYPE, "event_id", "group_id" 
	from "post" where "group_id" = 1;


	
-- Select all regular users with starting name like...
Select "name" , "user"."user_id" , "regular_user"."regular_user_id" from
 "user" 
	INNER JOIN "regular_user" on "regular_user"."user_id" = 
"user"."user_id"  
	where "user"."name" LIKE 'A%';

-- Select Reports that have no answer
Select "reporter_id", "approval", "reason", "reported_user_id", 
"reported_event_id", "reported_post_id", "reported_comment_id", 
"reported_group_id"
	from "report" where "approval" IS NULL;


--Select friends
Select "friend_id2"
	from "friend" where (TYPE = 'accepted' and "friend_id1" = 2);


--Select pending requests (the user that hasn't answered)
Select "friend_id2"
	from "friend" where (TYPE = 'pending' and "friend_id1" = 2);
	

--Files path from Posts

Select "file_path"
	from "file" INNER JOIN "post" on "post"."post_id" = "file"."post_id" 
where "post"."post_id" = 7 order by "date" DESC;

--Event informations of events I am interested on
Select "event"."event_id", "organization_id", "name", "location", 
"date", "information"
	FROM "event" INNER JOIN "user_interested_in_event" 
	on "event"."event_id" = "user_interested_in_event"."event_id"
	Where "user_interested_in_event"."user_id" = 2;
	
--Select group infomation of groups I belong
Select "group"."group_id" , "name", "information", TYPE
	from "user_in_group" INNER JOIN "group"
	on "user_in_group"."group_id" = "group"."group_id"
	where "user_id" = 2;

--Posts from groups I belong, users I am friends with and events I am 
interested on (Feed)
Select * from (
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "event_id", "post"."group_id" 
		from "post" INNER JOIN "user_in_group" on "post"."group_id" = 
"user_in_group"."group_id" 
		where "user_in_group"."user_id" = 2
	UNION
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "event_id", "post"."group_id" 
		from "post" INNER JOIN "friend" on "friend"."friend_id2" = 
"post"."author_id" 
		WHERE "friend".TYPE = 'accepted' AND "friend"."friend_id1" = 2
	UNION
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "post"."event_id", "post"."group_id" 
		from "post" INNER JOIN "user_interested_in_event" 
		on "post"."event_id" = "user_interested_in_event"."event_id"
		WHERE "user_interested_in_event"."user_id" = 2
) as posts
	NATURAL JOIN

(Select "post_id",count("post_id") from "comment" GROUP BY "post_id") as
 "comments" ;
	


-- Select all regular users and post with starting name ou title ou body
 is like something...
Select * from 
				(Select "name" , "user"."user_id" , "regular_user"."regular_user_id"
 from "user" 
				INNER JOIN "regular_user" on "regular_user"."user_id" = 
"user"."user_id"  
				where "user"."name" LIKE 'A%')
				 as "t1"
				FULL OUTER JOIN
				(Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "post"."event_id", "post"."group_id" from
					"post" where "post"."body" LIKE '%para%' or "post"."title" LIKE 
'%para%'
				) as "t2" on "t1"."name" = "body";
	
	
	
              </div>
              <div class="other-info">
              <div class="timestamp">17:59:35</div>
              </div>
          </div>
      </li><li class="list-item" tabindex="0" data-key="17:59:22">
          <div class="entry error">
              <div class="query">
                  <span id="query_source_icon" class="query-history-icon sql-icon-lg fa fa-play" role="img"></span>
                  
-- my info
Select "user_id", "name" from "user" where "email" = 'jokinho@feup.pt';


-- if is admin
Select "admin_id" from "admin" where "user_id" = 24;

-- if is regular_user
Select "regular_user_id", "personal_info" from "regular_user" where 
"user_id" = 4;

--if is a student
Select "student_id" from "student" where "regular_user_id" = 5;

-- if is a teacher
Select "teacher_id" from "teacher" where "regular_user_id" = 3;

-- if is an organization
Select "organization_id" from "organization" where "regular_user_id" = 
4;


-- Select user from a group
Select "user_id" from "user_in_group" where "group_id" = 1;

--events of organization
Select "name", "location", "date", "information" from "event" where 
"organization_id" = 1;


--Posts posted by me
Select "title", "body", "date", "upvotes", "downvotes", TYPE, 
"event_id", "group_id" 
	from "post" where "author_id" = 2;


--Notification
Select "origin_user_id", "description", "link", "date" from 
"notification"
	INNER JOIN "notified_user" on "notification"."notification_id" 
="notified_user"."notification_id" 
	where "user_notified" = 5;


--Message by chat
Select "sender_id", "body", "date"
	from "message" where "chat_id" = 2
	order by "date" DESC;


--Comments
 Select "comment_id", "user_id", "comment_to_id", "body", "date", 
"upvotes", "downvotes"
	from "comment" where "post_id" = 5
	order by "date" DESC;


--Posts from event
Select "author_id", "title", "body", "date", "upvotes", "downvotes", 
TYPE, "event_id", "group_id" 
	from "post" where "event_id" = 1;

--Posts from group
Select "author_id", "title", "body", "date", "upvotes", "downvotes", 
TYPE, "event_id", "group_id" 
	from "post" where "group_id" = 1;


	
-- Select all regular users with starting name like...
Select "name" , "user"."user_id" , "regular_user"."regular_user_id" from
 "user" 
	INNER JOIN "regular_user" on "regular_user"."user_id" = 
"user"."user_id"  
	where "user"."name" LIKE 'A%';

-- Select Reports that have no answer
Select "reporter_id", "approval", "reason", "reported_user_id", 
"reported_event_id", "reported_post_id", "reported_comment_id", 
"reported_group_id"
	from "report" where "approval" IS NULL;


--Select friends
Select "friend_id2"
	from "friend" where (TYPE = 'accepted' and "friend_id1" = 2);


--Select pending requests (the user that hasn't answered)
Select "friend_id2"
	from "friend" where (TYPE = 'pending' and "friend_id1" = 2);
	

--Files path from Posts

Select "file_path"
	from "file" INNER JOIN "post" on "post"."post_id" = "file"."post_id" 
where "post"."post_id" = 7 order by "date" DESC;

--Event informations of events I am interested on
Select "event"."event_id", "organization_id", "name", "location", 
"date", "information"
	FROM "event" INNER JOIN "user_interested_in_event" 
	on "event"."event_id" = "user_interested_in_event"."event_id"
	Where "user_interested_in_event"."user_id" = 2;
	
--Select group infomation of groups I belong
Select "group"."group_id" , "name", "information", TYPE
	from "user_in_group" INNER JOIN "group"
	on "user_in_group"."group_id" = "group"."group_id"
	where "user_id" = 2;

--Posts from groups I belong, users I am friends with and events I am 
interested on (Feed)
Select * from (
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "event_id", "post"."group_id" 
		from "post" INNER JOIN "user_in_group" on "post"."group_id" = 
"user_in_group"."group_id" 
		where "user_in_group"."user_id" = 2
	UNION
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "event_id", "post"."group_id" 
		from "post" INNER JOIN "friend" on "friend"."friend_id2" = 
"post"."author_id" 
		WHERE "friend".TYPE = 'accepted' AND "friend"."friend_id1" = 2
	UNION
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "post"."event_id", "post"."group_id" 
		from "post" INNER JOIN "user_interested_in_event" 
		on "post"."event_id" = "user_interested_in_event"."event_id"
		WHERE "user_interested_in_event"."user_id" = 2
) as posts
	NATURAL JOIN

(Select "post_id",count("post_id") from "comment" GROUP BY "post_id") as
 "comments" ;
	


-- Select all regular users and post with starting name ou title ou body
 is like something...
Select * from 
				(Select "name" , "user"."user_id" , "regular_user"."regular_user_id"
 from "user" 
				INNER JOIN "regular_user" on "regular_user"."user_id" = 
"user"."user_id"  
				where "user"."name" LIKE 'A%')
				 as "t1"
				FULL OUTER JOIN
				(Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "post"."event_id", "post"."group_id" from
					"post" where "post"."body" LIKE '%para%' or "post"."title" LIKE 
'%para%'
				) as "t2" on "t1"."name" = "post_id";
	
	
	
              </div>
              <div class="other-info">
              <div class="timestamp">17:59:22</div>
              </div>
          </div>
      </li><li class="list-item" tabindex="0" data-key="17:59:17">
          <div class="entry error">
              <div class="query">
                  <span id="query_source_icon" class="query-history-icon sql-icon-lg fa fa-play" role="img"></span>
                  
-- my info
Select "user_id", "name" from "user" where "email" = 'jokinho@feup.pt';


-- if is admin
Select "admin_id" from "admin" where "user_id" = 24;

-- if is regular_user
Select "regular_user_id", "personal_info" from "regular_user" where 
"user_id" = 4;

--if is a student
Select "student_id" from "student" where "regular_user_id" = 5;

-- if is a teacher
Select "teacher_id" from "teacher" where "regular_user_id" = 3;

-- if is an organization
Select "organization_id" from "organization" where "regular_user_id" = 
4;


-- Select user from a group
Select "user_id" from "user_in_group" where "group_id" = 1;

--events of organization
Select "name", "location", "date", "information" from "event" where 
"organization_id" = 1;


--Posts posted by me
Select "title", "body", "date", "upvotes", "downvotes", TYPE, 
"event_id", "group_id" 
	from "post" where "author_id" = 2;


--Notification
Select "origin_user_id", "description", "link", "date" from 
"notification"
	INNER JOIN "notified_user" on "notification"."notification_id" 
="notified_user"."notification_id" 
	where "user_notified" = 5;


--Message by chat
Select "sender_id", "body", "date"
	from "message" where "chat_id" = 2
	order by "date" DESC;


--Comments
 Select "comment_id", "user_id", "comment_to_id", "body", "date", 
"upvotes", "downvotes"
	from "comment" where "post_id" = 5
	order by "date" DESC;


--Posts from event
Select "author_id", "title", "body", "date", "upvotes", "downvotes", 
TYPE, "event_id", "group_id" 
	from "post" where "event_id" = 1;

--Posts from group
Select "author_id", "title", "body", "date", "upvotes", "downvotes", 
TYPE, "event_id", "group_id" 
	from "post" where "group_id" = 1;


	
-- Select all regular users with starting name like...
Select "name" , "user"."user_id" , "regular_user"."regular_user_id" from
 "user" 
	INNER JOIN "regular_user" on "regular_user"."user_id" = 
"user"."user_id"  
	where "user"."name" LIKE 'A%';

-- Select Reports that have no answer
Select "reporter_id", "approval", "reason", "reported_user_id", 
"reported_event_id", "reported_post_id", "reported_comment_id", 
"reported_group_id"
	from "report" where "approval" IS NULL;


--Select friends
Select "friend_id2"
	from "friend" where (TYPE = 'accepted' and "friend_id1" = 2);


--Select pending requests (the user that hasn't answered)
Select "friend_id2"
	from "friend" where (TYPE = 'pending' and "friend_id1" = 2);
	

--Files path from Posts

Select "file_path"
	from "file" INNER JOIN "post" on "post"."post_id" = "file"."post_id" 
where "post"."post_id" = 7 order by "date" DESC;

--Event informations of events I am interested on
Select "event"."event_id", "organization_id", "name", "location", 
"date", "information"
	FROM "event" INNER JOIN "user_interested_in_event" 
	on "event"."event_id" = "user_interested_in_event"."event_id"
	Where "user_interested_in_event"."user_id" = 2;
	
--Select group infomation of groups I belong
Select "group"."group_id" , "name", "information", TYPE
	from "user_in_group" INNER JOIN "group"
	on "user_in_group"."group_id" = "group"."group_id"
	where "user_id" = 2;

--Posts from groups I belong, users I am friends with and events I am 
interested on (Feed)
Select * from (
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "event_id", "post"."group_id" 
		from "post" INNER JOIN "user_in_group" on "post"."group_id" = 
"user_in_group"."group_id" 
		where "user_in_group"."user_id" = 2
	UNION
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "event_id", "post"."group_id" 
		from "post" INNER JOIN "friend" on "friend"."friend_id2" = 
"post"."author_id" 
		WHERE "friend".TYPE = 'accepted' AND "friend"."friend_id1" = 2
	UNION
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "post"."event_id", "post"."group_id" 
		from "post" INNER JOIN "user_interested_in_event" 
		on "post"."event_id" = "user_interested_in_event"."event_id"
		WHERE "user_interested_in_event"."user_id" = 2
) as posts
	NATURAL JOIN

(Select "post_id",count("post_id") from "comment" GROUP BY "post_id") as
 "comments" ;
	


-- Select all regular users and post with starting name ou title ou body
 is like something...
Select * from 
				(Select "name" , "user"."user_id" , "regular_user"."regular_user_id"
 from "user" 
				INNER JOIN "regular_user" on "regular_user"."user_id" = 
"user"."user_id"  
				where "user"."name" LIKE 'A%')
				 as "t1"
				FULL OUTER JOIN
				(Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "post"."event_id", "post"."group_id" from
					"post" where "post"."body" LIKE '%para%' or "post"."title" LIKE 
'%para%'
				) as "t2" on "t1"."name" = "post";
	
	
	
              </div>
              <div class="other-info">
              <div class="timestamp">17:59:17</div>
              </div>
          </div>
      </li><li class="list-item" tabindex="0" data-key="17:58:27">
          <div class="entry error">
              <div class="query">
                  <span id="query_source_icon" class="query-history-icon sql-icon-lg fa fa-play" role="img"></span>
                  
-- my info
Select "user_id", "name" from "user" where "email" = 'jokinho@feup.pt';


-- if is admin
Select "admin_id" from "admin" where "user_id" = 24;

-- if is regular_user
Select "regular_user_id", "personal_info" from "regular_user" where 
"user_id" = 4;

--if is a student
Select "student_id" from "student" where "regular_user_id" = 5;

-- if is a teacher
Select "teacher_id" from "teacher" where "regular_user_id" = 3;

-- if is an organization
Select "organization_id" from "organization" where "regular_user_id" = 
4;


-- Select user from a group
Select "user_id" from "user_in_group" where "group_id" = 1;

--events of organization
Select "name", "location", "date", "information" from "event" where 
"organization_id" = 1;


--Posts posted by me
Select "title", "body", "date", "upvotes", "downvotes", TYPE, 
"event_id", "group_id" 
	from "post" where "author_id" = 2;


--Notification
Select "origin_user_id", "description", "link", "date" from 
"notification"
	INNER JOIN "notified_user" on "notification"."notification_id" 
="notified_user"."notification_id" 
	where "user_notified" = 5;


--Message by chat
Select "sender_id", "body", "date"
	from "message" where "chat_id" = 2
	order by "date" DESC;


--Comments
 Select "comment_id", "user_id", "comment_to_id", "body", "date", 
"upvotes", "downvotes"
	from "comment" where "post_id" = 5
	order by "date" DESC;


--Posts from event
Select "author_id", "title", "body", "date", "upvotes", "downvotes", 
TYPE, "event_id", "group_id" 
	from "post" where "event_id" = 1;

--Posts from group
Select "author_id", "title", "body", "date", "upvotes", "downvotes", 
TYPE, "event_id", "group_id" 
	from "post" where "group_id" = 1;


	
-- Select all regular users with starting name like...
Select "name" , "user"."user_id" , "regular_user"."regular_user_id" from
 "user" 
	INNER JOIN "regular_user" on "regular_user"."user_id" = 
"user"."user_id"  
	where "user"."name" LIKE 'A%';

-- Select Reports that have no answer
Select "reporter_id", "approval", "reason", "reported_user_id", 
"reported_event_id", "reported_post_id", "reported_comment_id", 
"reported_group_id"
	from "report" where "approval" IS NULL;


--Select friends
Select "friend_id2"
	from "friend" where (TYPE = 'accepted' and "friend_id1" = 2);


--Select pending requests (the user that hasn't answered)
Select "friend_id2"
	from "friend" where (TYPE = 'pending' and "friend_id1" = 2);
	

--Files path from Posts

Select "file_path"
	from "file" INNER JOIN "post" on "post"."post_id" = "file"."post_id" 
where "post"."post_id" = 7 order by "date" DESC;

--Event informations of events I am interested on
Select "event"."event_id", "organization_id", "name", "location", 
"date", "information"
	FROM "event" INNER JOIN "user_interested_in_event" 
	on "event"."event_id" = "user_interested_in_event"."event_id"
	Where "user_interested_in_event"."user_id" = 2;
	
--Select group infomation of groups I belong
Select "group"."group_id" , "name", "information", TYPE
	from "user_in_group" INNER JOIN "group"
	on "user_in_group"."group_id" = "group"."group_id"
	where "user_id" = 2;

--Posts from groups I belong, users I am friends with and events I am 
interested on (Feed)
Select * from (
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "event_id", "post"."group_id" 
		from "post" INNER JOIN "user_in_group" on "post"."group_id" = 
"user_in_group"."group_id" 
		where "user_in_group"."user_id" = 2
	UNION
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "event_id", "post"."group_id" 
		from "post" INNER JOIN "friend" on "friend"."friend_id2" = 
"post"."author_id" 
		WHERE "friend".TYPE = 'accepted' AND "friend"."friend_id1" = 2
	UNION
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "post"."event_id", "post"."group_id" 
		from "post" INNER JOIN "user_interested_in_event" 
		on "post"."event_id" = "user_interested_in_event"."event_id"
		WHERE "user_interested_in_event"."user_id" = 2
) as posts
	NATURAL JOIN

(Select "post_id",count("post_id") from "comment" GROUP BY "post_id") as
 "comments" ;
	


-- Select all regular users and post with starting name ou title ou body
 is like something...
Select * from 
				(Select "name" , "user"."user_id" , "regular_user"."regular_user_id"
 from "user" 
				INNER JOIN "regular_user" on "regular_user"."user_id" = 
"user"."user_id"  
				where "user"."name" LIKE 'A%')
				 as "t1"
				FULL OUTER JOIN
				(Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "post"."event_id", "post"."group_id" from
					"post" where "post"."body" LIKE '%para%' or "post"."title" LIKE 
'%para%'
				) as "t2" on "t1"."name" = "t2"."post";
	
	
	
              </div>
              <div class="other-info">
              <div class="timestamp">17:58:27</div>
              </div>
          </div>
      </li><li class="list-item" tabindex="0" data-key="17:56:44">
          <div class="entry error">
              <div class="query">
                  <span id="query_source_icon" class="query-history-icon sql-icon-lg fa fa-play" role="img"></span>
                  
-- my info
Select "user_id", "name" from "user" where "email" = 'jokinho@feup.pt';


-- if is admin
Select "admin_id" from "admin" where "user_id" = 24;

-- if is regular_user
Select "regular_user_id", "personal_info" from "regular_user" where 
"user_id" = 4;

--if is a student
Select "student_id" from "student" where "regular_user_id" = 5;

-- if is a teacher
Select "teacher_id" from "teacher" where "regular_user_id" = 3;

-- if is an organization
Select "organization_id" from "organization" where "regular_user_id" = 
4;


-- Select user from a group
Select "user_id" from "user_in_group" where "group_id" = 1;

--events of organization
Select "name", "location", "date", "information" from "event" where 
"organization_id" = 1;


--Posts posted by me
Select "title", "body", "date", "upvotes", "downvotes", TYPE, 
"event_id", "group_id" 
	from "post" where "author_id" = 2;


--Notification
Select "origin_user_id", "description", "link", "date" from 
"notification"
	INNER JOIN "notified_user" on "notification"."notification_id" 
="notified_user"."notification_id" 
	where "user_notified" = 5;


--Message by chat
Select "sender_id", "body", "date"
	from "message" where "chat_id" = 2
	order by "date" DESC;


--Comments
 Select "comment_id", "user_id", "comment_to_id", "body", "date", 
"upvotes", "downvotes"
	from "comment" where "post_id" = 5
	order by "date" DESC;


--Posts from event
Select "author_id", "title", "body", "date", "upvotes", "downvotes", 
TYPE, "event_id", "group_id" 
	from "post" where "event_id" = 1;

--Posts from group
Select "author_id", "title", "body", "date", "upvotes", "downvotes", 
TYPE, "event_id", "group_id" 
	from "post" where "group_id" = 1;


	
-- Select all regular users with starting name like...
Select "name" , "user"."user_id" , "regular_user"."regular_user_id" from
 "user" 
	INNER JOIN "regular_user" on "regular_user"."user_id" = 
"user"."user_id"  
	where "user"."name" LIKE 'A%';

-- Select Reports that have no answer
Select "reporter_id", "approval", "reason", "reported_user_id", 
"reported_event_id", "reported_post_id", "reported_comment_id", 
"reported_group_id"
	from "report" where "approval" IS NULL;


--Select friends
Select "friend_id2"
	from "friend" where (TYPE = 'accepted' and "friend_id1" = 2);


--Select pending requests (the user that hasn't answered)
Select "friend_id2"
	from "friend" where (TYPE = 'pending' and "friend_id1" = 2);
	

--Files path from Posts

Select "file_path"
	from "file" INNER JOIN "post" on "post"."post_id" = "file"."post_id" 
where "post"."post_id" = 7 order by "date" DESC;

--Event informations of events I am interested on
Select "event"."event_id", "organization_id", "name", "location", 
"date", "information"
	FROM "event" INNER JOIN "user_interested_in_event" 
	on "event"."event_id" = "user_interested_in_event"."event_id"
	Where "user_interested_in_event"."user_id" = 2;
	
--Select group infomation of groups I belong
Select "group"."group_id" , "name", "information", TYPE
	from "user_in_group" INNER JOIN "group"
	on "user_in_group"."group_id" = "group"."group_id"
	where "user_id" = 2;

--Posts from groups I belong, users I am friends with and events I am 
interested on (Feed)
Select * from (
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "event_id", "post"."group_id" 
		from "post" INNER JOIN "user_in_group" on "post"."group_id" = 
"user_in_group"."group_id" 
		where "user_in_group"."user_id" = 2
	UNION
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "event_id", "post"."group_id" 
		from "post" INNER JOIN "friend" on "friend"."friend_id2" = 
"post"."author_id" 
		WHERE "friend".TYPE = 'accepted' AND "friend"."friend_id1" = 2
	UNION
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "post"."event_id", "post"."group_id" 
		from "post" INNER JOIN "user_interested_in_event" 
		on "post"."event_id" = "user_interested_in_event"."event_id"
		WHERE "user_interested_in_event"."user_id" = 2
) as posts
	NATURAL JOIN

(Select "post_id",count("post_id") from "comment" GROUP BY "post_id") as
 "comments" ;
	


-- Select all regular users and post with starting name ou title ou body
 is like something...
Select * from 
				(Select "name" , "user"."user_id" , "regular_user"."regular_user_id"
 from "user" 
				INNER JOIN "regular_user" on "regular_user"."user_id" = 
"user"."user_id"  
				where "user"."name" LIKE 'A%')
				 as "t1"
				FULL OUTER JOIN
				(Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "post"."event_id", "post"."group_id" from
					"post" where "post"."body" LIKE '%para%' or "post"."title" LIKE 
'%para%'
				) as "t2";
	
	
	
              </div>
              <div class="other-info">
              <div class="timestamp">17:56:44</div>
              </div>
          </div>
      </li><li class="list-item" tabindex="0" data-key="17:56:39">
          <div class="entry error">
              <div class="query">
                  <span id="query_source_icon" class="query-history-icon sql-icon-lg fa fa-play" role="img"></span>
                  
-- my info
Select "user_id", "name" from "user" where "email" = 'jokinho@feup.pt';


-- if is admin
Select "admin_id" from "admin" where "user_id" = 24;

-- if is regular_user
Select "regular_user_id", "personal_info" from "regular_user" where 
"user_id" = 4;

--if is a student
Select "student_id" from "student" where "regular_user_id" = 5;

-- if is a teacher
Select "teacher_id" from "teacher" where "regular_user_id" = 3;

-- if is an organization
Select "organization_id" from "organization" where "regular_user_id" = 
4;


-- Select user from a group
Select "user_id" from "user_in_group" where "group_id" = 1;

--events of organization
Select "name", "location", "date", "information" from "event" where 
"organization_id" = 1;


--Posts posted by me
Select "title", "body", "date", "upvotes", "downvotes", TYPE, 
"event_id", "group_id" 
	from "post" where "author_id" = 2;


--Notification
Select "origin_user_id", "description", "link", "date" from 
"notification"
	INNER JOIN "notified_user" on "notification"."notification_id" 
="notified_user"."notification_id" 
	where "user_notified" = 5;


--Message by chat
Select "sender_id", "body", "date"
	from "message" where "chat_id" = 2
	order by "date" DESC;


--Comments
 Select "comment_id", "user_id", "comment_to_id", "body", "date", 
"upvotes", "downvotes"
	from "comment" where "post_id" = 5
	order by "date" DESC;


--Posts from event
Select "author_id", "title", "body", "date", "upvotes", "downvotes", 
TYPE, "event_id", "group_id" 
	from "post" where "event_id" = 1;

--Posts from group
Select "author_id", "title", "body", "date", "upvotes", "downvotes", 
TYPE, "event_id", "group_id" 
	from "post" where "group_id" = 1;


	
-- Select all regular users with starting name like...
Select "name" , "user"."user_id" , "regular_user"."regular_user_id" from
 "user" 
	INNER JOIN "regular_user" on "regular_user"."user_id" = 
"user"."user_id"  
	where "user"."name" LIKE 'A%';

-- Select Reports that have no answer
Select "reporter_id", "approval", "reason", "reported_user_id", 
"reported_event_id", "reported_post_id", "reported_comment_id", 
"reported_group_id"
	from "report" where "approval" IS NULL;


--Select friends
Select "friend_id2"
	from "friend" where (TYPE = 'accepted' and "friend_id1" = 2);


--Select pending requests (the user that hasn't answered)
Select "friend_id2"
	from "friend" where (TYPE = 'pending' and "friend_id1" = 2);
	

--Files path from Posts

Select "file_path"
	from "file" INNER JOIN "post" on "post"."post_id" = "file"."post_id" 
where "post"."post_id" = 7 order by "date" DESC;

--Event informations of events I am interested on
Select "event"."event_id", "organization_id", "name", "location", 
"date", "information"
	FROM "event" INNER JOIN "user_interested_in_event" 
	on "event"."event_id" = "user_interested_in_event"."event_id"
	Where "user_interested_in_event"."user_id" = 2;
	
--Select group infomation of groups I belong
Select "group"."group_id" , "name", "information", TYPE
	from "user_in_group" INNER JOIN "group"
	on "user_in_group"."group_id" = "group"."group_id"
	where "user_id" = 2;

--Posts from groups I belong, users I am friends with and events I am 
interested on (Feed)
Select * from (
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "event_id", "post"."group_id" 
		from "post" INNER JOIN "user_in_group" on "post"."group_id" = 
"user_in_group"."group_id" 
		where "user_in_group"."user_id" = 2
	UNION
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "event_id", "post"."group_id" 
		from "post" INNER JOIN "friend" on "friend"."friend_id2" = 
"post"."author_id" 
		WHERE "friend".TYPE = 'accepted' AND "friend"."friend_id1" = 2
	UNION
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "post"."event_id", "post"."group_id" 
		from "post" INNER JOIN "user_interested_in_event" 
		on "post"."event_id" = "user_interested_in_event"."event_id"
		WHERE "user_interested_in_event"."user_id" = 2
) as posts
	NATURAL JOIN

(Select "post_id",count("post_id") from "comment" GROUP BY "post_id") as
 "comments" ;
	


-- Select all regular users and post with starting name ou title ou body
 is like something...
Select * from 
				(Select "name" , "user"."user_id" , "regular_user"."regular_user_id"
 from "user" 
				INNER JOIN "regular_user" on "regular_user"."user_id" = 
"user"."user_id"  
				where "user"."name" LIKE 'A%')
				 as "t1"
				FULL OUTER JOIN
				(Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "post"."event_id", "post"."group_id" from
					"post" where "post"."body" LIKE '%para%' or "post"."title" LIKE 
'%para%'
				) as "t2"
	
	
	
              </div>
              <div class="other-info">
              <div class="timestamp">17:56:39</div>
              </div>
          </div>
      </li><li class="list-item" tabindex="0" data-key="17:56:33">
          <div class="entry error">
              <div class="query">
                  <span id="query_source_icon" class="query-history-icon sql-icon-lg fa fa-play" role="img"></span>
                  
-- my info
Select "user_id", "name" from "user" where "email" = 'jokinho@feup.pt';


-- if is admin
Select "admin_id" from "admin" where "user_id" = 24;

-- if is regular_user
Select "regular_user_id", "personal_info" from "regular_user" where 
"user_id" = 4;

--if is a student
Select "student_id" from "student" where "regular_user_id" = 5;

-- if is a teacher
Select "teacher_id" from "teacher" where "regular_user_id" = 3;

-- if is an organization
Select "organization_id" from "organization" where "regular_user_id" = 
4;


-- Select user from a group
Select "user_id" from "user_in_group" where "group_id" = 1;

--events of organization
Select "name", "location", "date", "information" from "event" where 
"organization_id" = 1;


--Posts posted by me
Select "title", "body", "date", "upvotes", "downvotes", TYPE, 
"event_id", "group_id" 
	from "post" where "author_id" = 2;


--Notification
Select "origin_user_id", "description", "link", "date" from 
"notification"
	INNER JOIN "notified_user" on "notification"."notification_id" 
="notified_user"."notification_id" 
	where "user_notified" = 5;


--Message by chat
Select "sender_id", "body", "date"
	from "message" where "chat_id" = 2
	order by "date" DESC;


--Comments
 Select "comment_id", "user_id", "comment_to_id", "body", "date", 
"upvotes", "downvotes"
	from "comment" where "post_id" = 5
	order by "date" DESC;


--Posts from event
Select "author_id", "title", "body", "date", "upvotes", "downvotes", 
TYPE, "event_id", "group_id" 
	from "post" where "event_id" = 1;

--Posts from group
Select "author_id", "title", "body", "date", "upvotes", "downvotes", 
TYPE, "event_id", "group_id" 
	from "post" where "group_id" = 1;


	
-- Select all regular users with starting name like...
Select "name" , "user"."user_id" , "regular_user"."regular_user_id" from
 "user" 
	INNER JOIN "regular_user" on "regular_user"."user_id" = 
"user"."user_id"  
	where "user"."name" LIKE 'A%';

-- Select Reports that have no answer
Select "reporter_id", "approval", "reason", "reported_user_id", 
"reported_event_id", "reported_post_id", "reported_comment_id", 
"reported_group_id"
	from "report" where "approval" IS NULL;


--Select friends
Select "friend_id2"
	from "friend" where (TYPE = 'accepted' and "friend_id1" = 2);


--Select pending requests (the user that hasn't answered)
Select "friend_id2"
	from "friend" where (TYPE = 'pending' and "friend_id1" = 2);
	

--Files path from Posts

Select "file_path"
	from "file" INNER JOIN "post" on "post"."post_id" = "file"."post_id" 
where "post"."post_id" = 7 order by "date" DESC;

--Event informations of events I am interested on
Select "event"."event_id", "organization_id", "name", "location", 
"date", "information"
	FROM "event" INNER JOIN "user_interested_in_event" 
	on "event"."event_id" = "user_interested_in_event"."event_id"
	Where "user_interested_in_event"."user_id" = 2;
	
--Select group infomation of groups I belong
Select "group"."group_id" , "name", "information", TYPE
	from "user_in_group" INNER JOIN "group"
	on "user_in_group"."group_id" = "group"."group_id"
	where "user_id" = 2;

--Posts from groups I belong, users I am friends with and events I am 
interested on (Feed)
Select * from (
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "event_id", "post"."group_id" 
		from "post" INNER JOIN "user_in_group" on "post"."group_id" = 
"user_in_group"."group_id" 
		where "user_in_group"."user_id" = 2
	UNION
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "event_id", "post"."group_id" 
		from "post" INNER JOIN "friend" on "friend"."friend_id2" = 
"post"."author_id" 
		WHERE "friend".TYPE = 'accepted' AND "friend"."friend_id1" = 2
	UNION
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "post"."event_id", "post"."group_id" 
		from "post" INNER JOIN "user_interested_in_event" 
		on "post"."event_id" = "user_interested_in_event"."event_id"
		WHERE "user_interested_in_event"."user_id" = 2
) as posts
	NATURAL JOIN

(Select "post_id",count("post_id") from "comment" GROUP BY "post_id") as
 "comments" ;
	


-- Select all regular users and post with starting name ou title ou body
 is like something...
Select * from (
				(Select "name" , "user"."user_id" , "regular_user"."regular_user_id"
 from "user" 
				INNER JOIN "regular_user" on "regular_user"."user_id" = 
"user"."user_id"  
				where "user"."name" LIKE 'A%')
				 as "t1"
				FULL OUTER JOIN
				(Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "post"."event_id", "post"."group_id" from
					"post" where "post"."body" LIKE '%para%' or "post"."title" LIKE 
'%para%'
				) as "t2"
	)
	
	
              </div>
              <div class="other-info">
              <div class="timestamp">17:56:33</div>
              </div>
          </div>
      </li><li class="list-item" tabindex="0" data-key="17:56:30">
          <div class="entry error">
              <div class="query">
                  <span id="query_source_icon" class="query-history-icon sql-icon-lg fa fa-play" role="img"></span>
                  
-- my info
Select "user_id", "name" from "user" where "email" = 'jokinho@feup.pt';


-- if is admin
Select "admin_id" from "admin" where "user_id" = 24;

-- if is regular_user
Select "regular_user_id", "personal_info" from "regular_user" where 
"user_id" = 4;

--if is a student
Select "student_id" from "student" where "regular_user_id" = 5;

-- if is a teacher
Select "teacher_id" from "teacher" where "regular_user_id" = 3;

-- if is an organization
Select "organization_id" from "organization" where "regular_user_id" = 
4;


-- Select user from a group
Select "user_id" from "user_in_group" where "group_id" = 1;

--events of organization
Select "name", "location", "date", "information" from "event" where 
"organization_id" = 1;


--Posts posted by me
Select "title", "body", "date", "upvotes", "downvotes", TYPE, 
"event_id", "group_id" 
	from "post" where "author_id" = 2;


--Notification
Select "origin_user_id", "description", "link", "date" from 
"notification"
	INNER JOIN "notified_user" on "notification"."notification_id" 
="notified_user"."notification_id" 
	where "user_notified" = 5;


--Message by chat
Select "sender_id", "body", "date"
	from "message" where "chat_id" = 2
	order by "date" DESC;


--Comments
 Select "comment_id", "user_id", "comment_to_id", "body", "date", 
"upvotes", "downvotes"
	from "comment" where "post_id" = 5
	order by "date" DESC;


--Posts from event
Select "author_id", "title", "body", "date", "upvotes", "downvotes", 
TYPE, "event_id", "group_id" 
	from "post" where "event_id" = 1;

--Posts from group
Select "author_id", "title", "body", "date", "upvotes", "downvotes", 
TYPE, "event_id", "group_id" 
	from "post" where "group_id" = 1;


	
-- Select all regular users with starting name like...
Select "name" , "user"."user_id" , "regular_user"."regular_user_id" from
 "user" 
	INNER JOIN "regular_user" on "regular_user"."user_id" = 
"user"."user_id"  
	where "user"."name" LIKE 'A%';

-- Select Reports that have no answer
Select "reporter_id", "approval", "reason", "reported_user_id", 
"reported_event_id", "reported_post_id", "reported_comment_id", 
"reported_group_id"
	from "report" where "approval" IS NULL;


--Select friends
Select "friend_id2"
	from "friend" where (TYPE = 'accepted' and "friend_id1" = 2);


--Select pending requests (the user that hasn't answered)
Select "friend_id2"
	from "friend" where (TYPE = 'pending' and "friend_id1" = 2);
	

--Files path from Posts

Select "file_path"
	from "file" INNER JOIN "post" on "post"."post_id" = "file"."post_id" 
where "post"."post_id" = 7 order by "date" DESC;

--Event informations of events I am interested on
Select "event"."event_id", "organization_id", "name", "location", 
"date", "information"
	FROM "event" INNER JOIN "user_interested_in_event" 
	on "event"."event_id" = "user_interested_in_event"."event_id"
	Where "user_interested_in_event"."user_id" = 2;
	
--Select group infomation of groups I belong
Select "group"."group_id" , "name", "information", TYPE
	from "user_in_group" INNER JOIN "group"
	on "user_in_group"."group_id" = "group"."group_id"
	where "user_id" = 2;

--Posts from groups I belong, users I am friends with and events I am 
interested on (Feed)
Select * from (
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "event_id", "post"."group_id" 
		from "post" INNER JOIN "user_in_group" on "post"."group_id" = 
"user_in_group"."group_id" 
		where "user_in_group"."user_id" = 2
	UNION
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "event_id", "post"."group_id" 
		from "post" INNER JOIN "friend" on "friend"."friend_id2" = 
"post"."author_id" 
		WHERE "friend".TYPE = 'accepted' AND "friend"."friend_id1" = 2
	UNION
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "post"."event_id", "post"."group_id" 
		from "post" INNER JOIN "user_interested_in_event" 
		on "post"."event_id" = "user_interested_in_event"."event_id"
		WHERE "user_interested_in_event"."user_id" = 2
) as posts
	NATURAL JOIN

(Select "post_id",count("post_id") from "comment" GROUP BY "post_id") as
 "comments" ;
	


-- Select all regular users and post with starting name ou title ou body
 is like something...
Select * from (
				(Select "name" , "user"."user_id" , "regular_user"."regular_user_id"
 from "user" 
				INNER JOIN "regular_user" on "regular_user"."user_id" = 
"user"."user_id"  
				where "user"."name" LIKE 'A%')
				 as "t1"
				FULL OUTER JOIN
				(Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "post"."event_id", "post"."group_id" from
					"post" where "post"."body" LIKE '%para%' or "post"."title" LIKE 
'%para%'
				) as "t2"
	);
	
	
              </div>
              <div class="other-info">
              <div class="timestamp">17:56:30</div>
              </div>
          </div>
      </li><li class="list-item" tabindex="0" data-key="17:55:53">
          <div class="entry error">
              <div class="query">
                  <span id="query_source_icon" class="query-history-icon sql-icon-lg fa fa-play" role="img"></span>
                  
-- my info
Select "user_id", "name" from "user" where "email" = 'jokinho@feup.pt';


-- if is admin
Select "admin_id" from "admin" where "user_id" = 24;

-- if is regular_user
Select "regular_user_id", "personal_info" from "regular_user" where 
"user_id" = 4;

--if is a student
Select "student_id" from "student" where "regular_user_id" = 5;

-- if is a teacher
Select "teacher_id" from "teacher" where "regular_user_id" = 3;

-- if is an organization
Select "organization_id" from "organization" where "regular_user_id" = 
4;


-- Select user from a group
Select "user_id" from "user_in_group" where "group_id" = 1;

--events of organization
Select "name", "location", "date", "information" from "event" where 
"organization_id" = 1;


--Posts posted by me
Select "title", "body", "date", "upvotes", "downvotes", TYPE, 
"event_id", "group_id" 
	from "post" where "author_id" = 2;


--Notification
Select "origin_user_id", "description", "link", "date" from 
"notification"
	INNER JOIN "notified_user" on "notification"."notification_id" 
="notified_user"."notification_id" 
	where "user_notified" = 5;


--Message by chat
Select "sender_id", "body", "date"
	from "message" where "chat_id" = 2
	order by "date" DESC;


--Comments
 Select "comment_id", "user_id", "comment_to_id", "body", "date", 
"upvotes", "downvotes"
	from "comment" where "post_id" = 5
	order by "date" DESC;


--Posts from event
Select "author_id", "title", "body", "date", "upvotes", "downvotes", 
TYPE, "event_id", "group_id" 
	from "post" where "event_id" = 1;

--Posts from group
Select "author_id", "title", "body", "date", "upvotes", "downvotes", 
TYPE, "event_id", "group_id" 
	from "post" where "group_id" = 1;


	
-- Select all regular users with starting name like...
Select "name" , "user"."user_id" , "regular_user"."regular_user_id" from
 "user" 
	INNER JOIN "regular_user" on "regular_user"."user_id" = 
"user"."user_id"  
	where "user"."name" LIKE 'A%';

-- Select Reports that have no answer
Select "reporter_id", "approval", "reason", "reported_user_id", 
"reported_event_id", "reported_post_id", "reported_comment_id", 
"reported_group_id"
	from "report" where "approval" IS NULL;


--Select friends
Select "friend_id2"
	from "friend" where (TYPE = 'accepted' and "friend_id1" = 2);


--Select pending requests (the user that hasn't answered)
Select "friend_id2"
	from "friend" where (TYPE = 'pending' and "friend_id1" = 2);
	

--Files path from Posts

Select "file_path"
	from "file" INNER JOIN "post" on "post"."post_id" = "file"."post_id" 
where "post"."post_id" = 7 order by "date" DESC;

--Event informations of events I am interested on
Select "event"."event_id", "organization_id", "name", "location", 
"date", "information"
	FROM "event" INNER JOIN "user_interested_in_event" 
	on "event"."event_id" = "user_interested_in_event"."event_id"
	Where "user_interested_in_event"."user_id" = 2;
	
--Select group infomation of groups I belong
Select "group"."group_id" , "name", "information", TYPE
	from "user_in_group" INNER JOIN "group"
	on "user_in_group"."group_id" = "group"."group_id"
	where "user_id" = 2;

--Posts from groups I belong, users I am friends with and events I am 
interested on (Feed)
Select * from (
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "event_id", "post"."group_id" 
		from "post" INNER JOIN "user_in_group" on "post"."group_id" = 
"user_in_group"."group_id" 
		where "user_in_group"."user_id" = 2
	UNION
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "event_id", "post"."group_id" 
		from "post" INNER JOIN "friend" on "friend"."friend_id2" = 
"post"."author_id" 
		WHERE "friend".TYPE = 'accepted' AND "friend"."friend_id1" = 2
	UNION
	Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "post"."event_id", "post"."group_id" 
		from "post" INNER JOIN "user_interested_in_event" 
		on "post"."event_id" = "user_interested_in_event"."event_id"
		WHERE "user_interested_in_event"."user_id" = 2
) as posts
	NATURAL JOIN

(Select "post_id",count("post_id") from "comment" GROUP BY "post_id") as
 "comments" ;
	


-- Select all regular users and post with starting name ou title ou body
 is like something...
Select * from (
				(Select "name" , "user"."user_id" , "regular_user"."regular_user_id"
 from "user" 
				INNER JOIN "regular_user" on "regular_user"."user_id" = 
"user"."user_id"  
				where "user"."name" LIKE 'A%')
				 as "t1"
				JOIN
				(Select "post_id","author_id", "title", "body", "date", "upvotes", 
"downvotes", "post".TYPE, "post"."event_id", "post"."group_id" from
					"post" where "post"."body" LIKE '%para%' or "post"."title" LIKE 
'%para%'
				) as "t2"
	);
	
	
              </div>
              <div class="other-info">
              <div class="timestamp">17:55:53</div>
              </div>
          </div>
      </li></ul>
        </div></div>
        </div></div><div class="gutter gutter-horizontal" style="width: 1px;"></div><div style="width: calc(50% - 0.5px);"><div id="query_detail" class="query-detail">
            <div class="error-message-block d-none"></div>
            <div class="info-message-block d-none"></div>
            <div class="metadata-block"><div class="metadata">
                <div class="item">
                  <span class="value">4/11/2020 5:19:08 PM</span>
                  <span class="description">Date</span>
              </div>
                <div class="item">
                  <span class="value">-1</span>
                  <span class="description">Rows Affected</span>
              </div>
                <div class="item">
                  <span class="value">475 msec</span>
                  <span class="description">Duration</span>
              </div>
            </div></div>
            <div class="query-statement-block">
              <div id="history-detail-query">
                <button class="btn-copy copy-all" tabindex="0" accesskey="y">Copy</button>
                <button class="btn-copy-editor copy-to-editor" tabindex="0" accesskey="y">Copy to Query Editor</button>
                <div><div class="CodeMirror cm-s-default" style="font-size: 1em;"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 0px;"><textarea style="position: absolute; bottom: -1em; padding: 0px; width: 1px; height: 1em; outline: currentcolor none medium;" autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="-1" wrap="off"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true" style="display: block; bottom: 0px;"><div style="min-width: 1px; height: 284px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true" style="display: block; right: 0px; left: 0px;"><div style="height: 100%; min-height: 1px; width: 33px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1" draggable="true"><div class="CodeMirror-sizer" style="margin-left: 0px; min-width: 3px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative;"><div class="CodeMirror-lines" role="presentation"><div style="position: relative; outline: currentcolor none medium;" role="presentation"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"><pre class="CodeMirror-line" role="presentation"><span role="presentation"><span class="cm-keyword">DROP</span> <span class="cm-keyword">TABLE</span> <span class="cm-keyword">IF</span> <span class="cm-keyword">EXISTS</span> <span class="cm-keyword">public</span>."user_interested_in_event"<span class="cm-punctuation">;</span></span></pre></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"></div><div class="CodeMirror-code" role="presentation"></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; border-bottom: 0px solid transparent;"></div><div class="CodeMirror-gutters" style="display: none;"></div></div></div></div>
              </div>
            </div>
            <div>
              <hr class="block-divider">
            </div>
            <div class="message-block">
              <div class="message">
                <div class="message-header">Messages</div>
                <div class="content"><pre class="content-value">CREATE TABLE

Query returned successfully in 475 msec.</pre></div>
              </div>
            </div>
        </div></div></div></div></td></tr></tbody></table></div></div></div></div><div class="wcLayoutPane" style="bottom: 0px; height: 424.25px; left: 0px; right: 0px;"><div class="wcFrame wcWide wcTall"><div class="wcFrameTitleBar wcTabTop" style="width: 1605px;"><div class="wcTabScroller" style="left: 0px;"><div class="wcPanelTab" id="0"><div><a href="#" tabindex="-1" class="panel-link-heading">Data Output</a></div></div><div class="wcPanelTab" id="1"><div><a href="#" tabindex="-1" class="panel-link-heading">Explain</a></div></div><div class="wcPanelTab wcPanelTabActive" id="2"><div><a href="#" tabindex="-1" class="panel-link-heading">Messages</a></div></div><div class="wcPanelTab" id="3"><div><a href="#" tabindex="-1" class="panel-link-heading">Notifications</a></div></div></div><div class="wcFrameButtonBar" style="min-width: 0px; width: 0px; right: 0px;"></div></div><div class="wcFrameButtonBar" style="min-width: 0px; width: 0px;"><div class="wcFrameButton" title="Close the currently active panel tab" aria-label="Close panel" tabindex="0" style="display: none;"><div class="fa fa-close"></div></div><div class="wcFrameButton" title="Collapse the active panel" style="display: none;"><div class="fa fa-download"></div>C</div></div><div class="wcFrameCenter wcPanelBackground wcScrollableX wcScrollableY" style="left: 0px; right: 0px; bottom: 0px;"><div class="wcPanelTabContent wcPanelTabContentHidden" id="0"><table class="wcLayout wcWide wcTall"><tbody><tr><td><div class="pg-panel-content hide-vertical-scrollbar"><div id="datagrid" class="sql-editor-grid-container text-12" tabindex="0"></div></div></td></tr></tbody></table></div><div class="wcPanelTabContent wcPanelTabContentHidden" id="1"><table class="wcLayout wcWide wcTall"><tbody><tr><td><div class="pg-panel-content"><div class="sql-editor-explain" tabindex="0"></div></div></td></tr></tbody></table></div><div class="wcPanelTabContent" id="2"><table class="wcLayout wcWide wcTall"><tbody><tr><td><div class="pg-panel-content"><div role="status" class="sql-editor-message" tabindex="0">CREATE TABLE

Query returned successfully in 475 msec.</div></div></td></tr></tbody></table></div><div class="wcPanelTabContent wcPanelTabContentHidden" id="3"><table class="wcLayout wcWide wcTall"><tbody><tr><td><div class="pg-panel-content"><div id="notification_grid" class="sql-editor-notifications" tabindex="0"><table class="backgrid presentation table table-bordered table-hover table-noouter-border table-bottom-border" role="table"><thead><tr><th class="sortable renderable recorded_time" role="columnheader"><button>Recorded time<span class="sort-caret" aria-hidden="true"></span></button></th><th class="sortable renderable channel" role="columnheader"><button>Event<span class="sort-caret" aria-hidden="true"></span></button></th><th class="sortable renderable pid" role="columnheader"><button>Process ID<span class="sort-caret" aria-hidden="true"></span></button></th><th class="sortable renderable payload" role="columnheader"><button>Payload<span class="sort-caret" aria-hidden="true"></span></button></th></tr></thead><tbody><tr class="empty"><td colspan="4"><span>No data found</span></td></tr></tbody></table></div></div></td></tr></tbody></table></div></div></div></div><div class="wcSplitterBar wcWide wcSplitterBarH" style="top: 427.25px; left: 0px;"><div class="wcSplitterBarLine"></div></div></div></div>
    </div>
</div>
<script>
            require(['sources/generated/browser_nodes', 'sources/generated/codemirror', 'sources/generated/slickgrid'], function() {
    require(['sources/generated/sqleditor'], function(ctx) {
        var $ = pgAdmin.SqlEditor.jquery,
            S = pgAdmin.SqlEditor.S,
            editorPanel = $('.sql-editor'),
            loadingDiv = $('#fetching_data'),
            msgDiv = loadingDiv.find('.sql-editor-busy-text');

        // Register unload event on window close.
        /* If opened in new tab, close the connection only on tab/window close and
         * not on refresh attempt because the user may cancel the reload
         */
        if(window.opener) {
          $(window).on('unload', function(ev) {
            $.ajax({
              method: 'DELETE',
              url: "/datagrid/" + "close/" + 9702797
            });
          });
        } else {
          $(window).on('beforeunload', function(ev) {
            $.ajax({
              method: 'DELETE',
              url: "/datagrid/" + "close/" + 9702797
            });
          });
        }

        // Get the controller object from pgAdmin.SqlEditor
        var sqlEditorController = pgAdmin.SqlEditor.create(editorPanel);

        // Listen on events to show/hide loading-icon and change messages.
        sqlEditorController.on('pgadmin-sqleditor:loading-icon:message', function(msg) {
            msgDiv.text(msg);
          }).on('pgadmin-sqleditor:loading-icon:show', function(msg) {
            loadingDiv.removeClass('d-none');
            msgDiv.text(msg);
          }).on('pgadmin-sqleditor:loading-icon:hide', function() {
            loadingDiv.addClass('d-none');
          });
                    var script_type_url = '';
                // Start the query tool.
        sqlEditorController.start(
            9702797,
            {"is_query_tool": "true", "sgid": "1", "sid": "2", "server_type": "pg", "did": "7880027", "title": "lbaw2034/lbaw2034@LBAW34"},
            '{"floating":[],"root":{"type":"wcSplitter","horizontal":false,"isDrawer":false,"pane0":{"type":"wcFrame","floating":false,"isFocus":false,"tabOrientation":"top","pos":{"x":0.5,"y":0.5},"size":{"x":1212,"y":278.355},"tab":0,"panels":[{"type":"wcPanel","panelType":"sql_panel","size":{"x":1212,"y":278.355},"customData":{}},{"type":"wcPanel","panelType":"history","size":{"x":1616,"y":278.355},"customData":{}}]},"pane1":{"type":"wcFrame","floating":false,"isFocus":false,"tabOrientation":"top","pos":{"x":0.5,"y":0.5},"size":{"x":1616,"y":843.5},"tab":0,"panels":[{"type":"wcPanel","panelType":"data_output","size":{"x":1616,"y":843.5},"customData":{}},{"type":"wcPanel","panelType":"explain","size":{"x":1616,"y":843.5},"customData":{}},{"type":"wcPanel","panelType":"messages","size":{"x":1616,"y":843.5},"customData":{}},{"type":"wcPanel","panelType":"notifications","size":{"x":1616,"y":843.5},"customData":{}}]},"pos":0.5}}'
        );

        // If opening from schema diff, set the generated script to the SQL Editor

        var schema_ddl_diff = (window.opener !== null) ? window.opener.pgAdmin.ddl_diff : (window.parent !== null) ? window.parent.pgAdmin.ddl_diff : window.top.pgAdmin.ddl_diff;
        sqlEditorController.set_value_to_editor(schema_ddl_diff);
        if (window.opener !== null) window.opener.pgAdmin.ddl_diff = '';
        else if (window.parent !== null) window.parent.pgAdmin.ddl_diff = '';
        else if (window.top !== null) window.top.pgAdmin.ddl_diff = '';

    });
});

</script>


<div class="alertify ajs-hidden  ajs-movable ajs-pinnable ajs-zoom"><div class="ajs-dimmer"></div><div class="ajs-modal" tabindex="0"><div class="ajs-dialog" tabindex="0"><button class="ajs-reset" aria-label="reset"></button><div class="ajs-commands"><button class="ajs-pin" aria-label="Pin"></button><button class="ajs-maximize" aria-label="Maximize" tabindex="0"></button><button class="ajs-close" aria-label="Close"></button></div><div class="ajs-header">AlertifyJS</div><div class="ajs-body"><div class="ajs-content"></div></div><div class="ajs-footer"><div class="ajs-auxiliary ajs-buttons"></div><div class="ajs-primary ajs-buttons"><button class="ajs-button btn btn-secondary fa fa-lg fa-times pg-alertify-button">Cancel</button><button class="ajs-button btn btn-primary fa fa-lg fa-check pg-alertify-button">OK</button></div></div><div class="ajs-handle"></div><button class="ajs-reset" aria-label="reset"></button></div></div></div><div class="alertify ajs-hidden  ajs-movable ajs-pinnable ajs-zoom"><div class="ajs-dimmer"></div><div class="ajs-modal" tabindex="0"><div class="ajs-dialog" tabindex="0"><button class="ajs-reset" aria-label="reset"></button><div class="ajs-commands"><button class="ajs-pin" aria-label="Pin"></button><button class="ajs-maximize" aria-label="Maximize" tabindex="0"></button><button class="ajs-close" aria-label="Close"></button></div><div class="ajs-header">AlertifyJS</div><div class="ajs-body"><div class="ajs-content"><p></p><label for="alertify-prompt-0" style="display: none;">HiddenLabel</label><input class="form-control" type="text" id="alertify-prompt-0"></div></div><div class="ajs-footer"><div class="ajs-auxiliary ajs-buttons"></div><div class="ajs-primary ajs-buttons"><button class="ajs-button btn btn-secondary fa fa-lg fa-times pg-alertify-button">Cancel</button><button class="ajs-button btn btn-primary fa fa-lg fa-check pg-alertify-button">OK</button></div></div><div class="ajs-handle"></div><button class="ajs-reset" aria-label="reset"></button></div></div></div><div class="alertify ajs-hidden  ajs-movable ajs-pinnable ajs-zoom"><div class="ajs-dimmer"></div><div class="ajs-modal" tabindex="0"><div class="ajs-dialog" tabindex="0"><button class="ajs-reset" aria-label="reset"></button><div class="ajs-commands"><button class="ajs-pin" aria-label="Pin"></button><button class="ajs-maximize" aria-label="Maximize" tabindex="0"></button><button class="ajs-close" aria-label="Close"></button></div><div class="ajs-header">AlertifyJS</div><div class="ajs-body"><div class="ajs-content"></div></div><div class="ajs-footer"><div class="ajs-auxiliary ajs-buttons"></div><div class="ajs-primary ajs-buttons"><button class="ajs-button btn btn-primary fa fa-lg fa-check pg-alertify-button">OK</button></div></div><div class="ajs-handle"></div><button class="ajs-reset" aria-label="reset"></button></div></div></div><div class="alertify ajs-hidden  ajs-movable ajs-pinnable ajs-zoom"><div class="ajs-dimmer"></div><div class="ajs-modal" tabindex="0"><div class="ajs-dialog" tabindex="0"><button class="ajs-reset" aria-label="reset"></button><div class="ajs-commands"><button class="ajs-pin" aria-label="Pin"></button><button class="ajs-maximize" aria-label="Maximize" tabindex="0"></button><button class="ajs-close" aria-label="Close"></button></div><div class="ajs-header">AlertifyJS</div><div class="ajs-body"><div class="ajs-content"></div></div><div class="ajs-footer"><div class="ajs-auxiliary ajs-buttons"></div><div class="ajs-primary ajs-buttons"><button class="ajs-button btn btn-secondary fa fa-lg fa-times pg-alertify-button">Cancel</button><button class="ajs-button btn btn-primary fa fa-lg fa-check pg-alertify-button">OK</button></div></div><div class="ajs-handle"></div><button class="ajs-reset" aria-label="reset"></button></div></div></div><div class="alertify ajs-hidden  ajs-movable ajs-pinnable ajs-zoom"><div class="ajs-dimmer"></div><div class="ajs-modal" tabindex="0"><div class="ajs-dialog" tabindex="0"><button class="ajs-reset" aria-label="reset"></button><div class="ajs-commands"><button class="ajs-pin" aria-label="Pin"></button><button class="ajs-maximize" aria-label="Maximize" tabindex="0"></button><button class="ajs-close" aria-label="Close"></button></div><div class="ajs-header">AlertifyJS</div><div class="ajs-body"><div class="ajs-content"><p></p><label for="alertify-prompt-0" style="display: none;">HiddenLabel</label><input class="form-control" type="text" id="alertify-prompt-0"></div></div><div class="ajs-footer"><div class="ajs-auxiliary ajs-buttons"></div><div class="ajs-primary ajs-buttons"><button class="ajs-button btn btn-secondary fa fa-lg fa-times pg-alertify-button">Cancel</button><button class="ajs-button btn btn-primary fa fa-lg fa-check pg-alertify-button">OK</button></div></div><div class="ajs-handle"></div><button class="ajs-reset" aria-label="reset"></button></div></div></div><div class="alertify ajs-hidden  ajs-movable ajs-pinnable ajs-zoom"><div class="ajs-dimmer"></div><div class="ajs-modal" tabindex="0"><div class="ajs-dialog" tabindex="0"><button class="ajs-reset" aria-label="reset"></button><div class="ajs-commands"><button class="ajs-pin" aria-label="Pin"></button><button class="ajs-maximize" aria-label="Maximize" tabindex="0"></button><button class="ajs-close" aria-label="Close"></button></div><div class="ajs-header">AlertifyJS</div><div class="ajs-body"><div class="ajs-content"></div></div><div class="ajs-footer"><div class="ajs-auxiliary ajs-buttons"></div><div class="ajs-primary ajs-buttons"><button class="ajs-button btn btn-primary fa fa-lg fa-check pg-alertify-button">OK</button></div></div><div class="ajs-handle"></div><button class="ajs-reset" aria-label="reset"></button></div></div></div><div class="alertify  ajs-modeless ajs-movable ajs-resizable ajs-zoom ajs-no-padding ajs-no-overflow ajs-out ajs-hidden"><div class="ajs-dimmer"></div><div class="ajs-modal" tabindex="0"><div class="ajs-dialog pg-el-container" tabindex="0" style="" el="sm"><button class="ajs-reset" aria-label="reset"></button><div class="ajs-commands"><button class="ajs-pin" aria-label="Pin"></button><button class="ajs-maximize" aria-label="Maximize" tabindex="0" title="Maximize"></button><button class="ajs-close" aria-label="Close" title="Close"></button></div><div class="ajs-header">Select file</div><div class="ajs-body"><div class="ajs-content alertify_tools_dialog_properties"><div class="storage_dialog file_selection_dlg"></div></div></div><div class="ajs-footer"><div class="ajs-auxiliary ajs-buttons"></div><div class="ajs-primary ajs-buttons"><button class="ajs-button btn btn-secondary fa fa-times pg-alertify-button">Cancel</button><button class="ajs-button btn btn-primary fa fa-file file_manager_ok pg-alertify-button">Select</button></div></div><div class="ajs-handle"></div><button class="ajs-reset" aria-label="reset"></button></div></div></div><div class="alertify-notifier ajs-bottom ajs-right"></div></body></html>